
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>DEPLOYMENT &#8212; Resiko Kesehatan Ibu - Datamining</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'resiko-kesehatan-ibu';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Datamining Tentang Resiko Kesehatan Ibu Hamil" href="intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Resiko Kesehatan Ibu - Datamining - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Resiko Kesehatan Ibu - Datamining - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Datamining Tentang Resiko Kesehatan Ibu Hamil
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">DEPLOYMENT</a></li>







</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/Vall-Here/datamining_resiko-kesehatan-ibu" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Vall-Here/datamining_resiko-kesehatan-ibu/issues/new?title=Issue%20on%20page%20%2Fresiko-kesehatan-ibu.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/resiko-kesehatan-ibu.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>DEPLOYMENT</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">DEPLOYMENT</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#maternal-health-risk">MATERNAL HEALTH RISK</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#tujuan-analisis-mengetahui-resiko-kesehatan-ibu-hamil">TUJUAN ANALISIS : MENGETAHUI RESIKO KESEHATAN IBU HAMIL</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#memahami-data">MEMAHAMI DATA</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#collecting-data-from-web-to-dataframe">Collecting data from web to dataframe</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#importing-data-from-api-to-dataframe">Importing data from API to dataframe</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#identifikasi-data">Identifikasi data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tabel-distribusi">Tabel Distribusi</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#prediksi-dan-target">Prediksi dan Target</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kualitas-data">Kualitas Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#missing-values">Missing Values</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deteksi-outlier">Deteksi Outlier</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#k-tetangga-terdekat-k-nearest-neighbors-k-nn">1. K-Tetangga Terdekat (K-Nearest Neighbors, K-NN)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#jarak-jangkauan-reachability-distance">2. Jarak Jangkauan (Reachability Distance)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#kepadatan-jangkauan-lokal-local-reachability-density">3. Kepadatan Jangkauan Lokal (Local Reachability Density)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#faktor-outlier-lokal-local-outlier-factor">4. Faktor Outlier Lokal (Local Outlier Factor)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#data-preprocessing">DATA PREPROCESSING</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mengatasi-outlier">Mengatasi Outlier</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#data-modelling">DATA MODELLING</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#apa-itu-klasifikasi-data">Apa itu Klasifikasi data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#membuat-model-gaussian-naive-bayes-dengan-code-python">Membuat Model Gaussian Naive Bayes dengan Code Python</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#membuat-model-k-nearest-neighbors-knn-dengan-code-python">Membuat Model K-Nearest Neighbors (KNN) dengan Code Python</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#membuat-model-classifier-dengan-konsep-ensemble-learning-stacking">Membuat Model Classifier dengan Konsep Ensemble Learning Stacking</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ensemble-learning-stacking-menggunakan-library-sklearn">Ensemble Learning Stacking Menggunakan Library Sklearn</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#membuat-model-ensemble-bagging-classifier">Membuat Model Ensemble Bagging Classifier</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#kesimpulan">KESIMPULAN</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#keputusan">Keputusan</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="deployment">
<h1>DEPLOYMENT<a class="headerlink" href="#deployment" title="Link to this heading">#</a></h1>
<p>Link Menuju Website : <a class="reference external" href="https://maternalhealthrisk.pythonanywhere.com/">https://maternalhealthrisk.pythonanywhere.com/</a></p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="maternal-health-risk">
<h1>MATERNAL HEALTH RISK<a class="headerlink" href="#maternal-health-risk" title="Link to this heading">#</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="tujuan-analisis-mengetahui-resiko-kesehatan-ibu-hamil">
<h1>TUJUAN ANALISIS : MENGETAHUI RESIKO KESEHATAN IBU HAMIL<a class="headerlink" href="#tujuan-analisis-mengetahui-resiko-kesehatan-ibu-hamil" title="Link to this heading">#</a></h1>
<p>Mendiagnosa tingkat resiko ibu hamil akan sakit dengan menggunakan MHR dataset from uci dataset (<a class="reference external" href="https://archive.ics.uci.edu/dataset/863/maternal+health+risk">https://archive.ics.uci.edu/dataset/863/maternal+health+risk</a>)</p>
<p>Banyak ibu hamil yang meninggal akibat komplikasi kehamilan karena tidak mempunyai informasi yang cukup mengenai pelayanan kesehatan ibu selama kehamilan dan pasca kehamilan. Setiap momen harus dipantau selama kehamilan untuk perkembangan kesehatan janin dan untuk memastikan persalinan tidak berbahaya. Perawatan dan diagnosis yang tepat pada awal kehamilan dapat membantu mengurangi kematian ibu hamil dan neonatal yang dapat dicegah, terutama di daerah pedesaan.</p>
<p>Setelah analisis ini, diharapkan dapat memprediksi tingkat risiko yang mempengaruhi kesehatan ibu hamil.</p>
<p>Dalam deepnote ini, kami akan menganalisis beberapa atribut yang mempengaruhi kesehatan ibu hamil. Kami juga akan membuat model pembelajaran mesin untuk memprediksi tingkat risiko kesehatan ibu hamil.</p>
<ul class="simple">
<li><p>Untuk mengetahui dan mengidentifikasi tingkat resiko ibu hamil berdasarkan penelitian pada Paper yang berjudul “Implementasi Data Mining C4.5 Untuk Klasifikasi Faktor Resiko Kesehatan Pada Ibu Hamil” bahwa faktor resiko sangat penting untuk diidentifikasi secara dini guna mencegah komplikasi terkait kehamilan. Faktor resiko dapat diklasifikasikan berdasarkan data rekam medis dari pasien ibu hamil. Faktor yang menjadi indikator terdiri usia, tekanan darah (sistolik dan diastolik), gula darah serta detak jantung. Dari hal tersebut dapat diklasifikasikan resiko kesehatan bagi seorang ibu hamil.</p></li>
</ul>
<ul class="simple">
<li><p>Selain itu pada jurnal yang diterbitkan oleh kemenkes yang berjudul : “Pedoman Nasional Pelayanan Kesehatan Ibu, Bayi Baru Lahir dan Balita” Kementerian Kesehatan Republik Indonesia
Tahun: 2020
Link: <a class="reference external" href="https://repository.kemkes.go.id/book/122">https://repository.kemkes.go.id/book/122</a>
Pedoman ini memuat rekomendasi pengambilan data seperti tekanan darah sistolik, tekanan darah diastolik, gula darah, suhu tubuh, dan detak jantung selama kehamilan untuk mendeteksi potensi risiko komplikasi, termasuk preeklamsia (tekanan darah tinggi yang tidak terkontrol) dan diabetes gestasional.</p></li>
</ul>
<ul class="simple">
<li><p>Referensi yang lain pada jurnal yang diterbitkan kemenkes indonesia yang berjudul “Buku Panduan Asuhan Kehamilan”
Kementerian Kesehatan Republik Indonesia
Tahun: 2019
Link: <a class="reference external" href="https://gizikia.kemkes.go.id/assets/file/pedoman/Buku%20Saku%20Kehamilan%20Sehat.pdf">https://gizikia.kemkes.go.id/assets/file/pedoman/Buku Saku Kehamilan Sehat.pdf</a>
Buku panduan ini juga menjelaskan pentingnya pengambilan data seperti tekanan darah sistolik, tekanan darah diastolik, gula darah, suhu tubuh, dan detak jantung selama kehamilan untuk memastikan kesehatan ibu dan bayi.</p></li>
</ul>
<ul class="simple">
<li><p>Referensi Terakhir yang kami gunakan yaitu jurnal yang berjudul : “Pengetahuan Kesehatan Reproduksi dan Menikah Dini pada Remaja Putri” yang diterbitkan oleh :
Choirunisa Giska Adelia
Universitas Airlangga Surabaya
Link : <a class="reference external" href="https://journal.ibrahimy.ac.id/index.php/oksitosin/article/view/2534">https://journal.ibrahimy.ac.id/index.php/oksitosin/article/view/2534</a>
Tentang Pengaruh Usia dini dalam kesehatan Ibu dan anak</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="memahami-data">
<h1>MEMAHAMI DATA<a class="headerlink" href="#memahami-data" title="Link to this heading">#</a></h1>
<p>Oleh karena itu, kami mengambil dataset yang sesuai dengan faktor resiko yang menjadi indikator sama dengan rujukan di atas, yaitu UCI Machine Learning tentang Maternal Health Risk yang dapat diakses melalui halaman: <a class="reference external" href="https://archive.ics.uci.edu/dataset/863/maternal+health+risk">https://archive.ics.uci.edu/dataset/863/maternal+health+risk</a></p>
<p>Data tersebut berfokus pada faktor resiko kesehatan pada ibu hamil. Indikator yang digunakan dalam data tersebut yaitu Age, Systolic BP, Diastolic BP, Blood Sugar, Body Temp, Heart Rate yang sesuai dengan indikator faktor resiko sebelumnya.</p>
<p>Penjelasan teori Attribute dalam data :</p>
<p>Referensi dari buku yang berjudul “Data Mining Concepts and Techniques” edisi ketiga.</p>
<p>link : The-Morgan-Kaufmann-Series-in-Data-Management-Systems-Jiawei-Han-Micheline-Kamber-Jian-Pei-Data-Mining.-Concepts-and-Techniques-3rd-Edition-Morgan-Kaufmann</p>
<p>Dalam buku tersebut menjelaskan bahwa : Atribut adalah bidang data, yang mewakili karakteristik atau fitur objek data. Kata atribut, dimensi, fitur, dan variabel sering digunakan secara bergantian dalam
literatur. Istilah dimensi umumnya digunakan dalam data warehousing. Pembelajaran mesin
literatur cenderung menggunakan istilah fitur, sedangkan ahli statistik lebih memilih istilah variabel. Data
profesional pertambangan dan basis data biasanya menggunakan istilah atribut, dan kami melakukannya di sini
demikian juga. Atribut yang mendeskripsikan objek pelanggan dapat mencakup, misalnya, ID pelanggan,
Nama dan alamat. Nilai yang diamati untuk atribut tertentu dikenal sebagai observasi. Satu set
Atribut yang digunakan untuk mendeskripsikan objek tertentu disebut vektor atribut (atau vektor fitur). Distribusi data yang melibatkan satu atribut (atau variabel) disebut univariat.
Distribusi bivariat melibatkan dua atribut, dan seterusnya.</p>
<p>Untuk menganalisis faktor risiko ibu hamil</p>
<ul class="simple">
<li><p>Fitur :  “Age” dengan tipe data Numerik, adalah usia dalam tahun ketika seorang wanita sedang mangalami kehamilan.</p></li>
</ul>
<ul class="simple">
<li><p>Fitur :  “SystollicBP” dengan tipe data Numerik, adalah nilai tekanan darah tertinggi dalam mmHg (milimeter air raksa) yang dapat diukur menggunakan manset tensimeter</p></li>
</ul>
<ul class="simple">
<li><p>Fitur : “DiastolicBP” dengan tipe data Numerik, adalah nilai tekanan darah terendah dalam mmHg (milimeter air raksa) yang dapat diukur menggunakan manset tensimeter
Manset tensimeter adalah alat tensimeter untuk mengukur tekanan darah. Manset ini berbahan lentur dan nyaman, seperti kain atau karet, dan dipasang di lengan bagian atas.</p></li>
</ul>
<ul class="simple">
<li><p>Fitur : “BS” dengan tipe data Numerik, adalah kadar glukosa darah dinyatakan dalam molar, mmol/L yang dapat diukur menggunakan glukometer. Glukometer adalah alat untuk mengukur kadar gula darah (glukosa).</p></li>
</ul>
<ul class="simple">
<li><p>Fitur : “BodyTemp” dengan tipe data Numerik, adalah suhu badan ibu dalam fahrenheit yang dapat diukur dalam termometer fahrenheit. Termometer Fahrenheit adalah alat ukur suhu yang menggunakan skala Fahrenheit, yang didasarkan pada titik beku dan titik didih air.</p></li>
</ul>
<ul class="simple">
<li><p>Fitur : “HeartRate” dengan tipe data Numerik, adalah jumlah berapa kali detak jantung setiap menit ketika dalam waktu istirahat, dalam satuan bpm (beat per minute) yang dapat diukur menggunakan Elektrokardiograf. Alat Elektrokardiograf (EKG) adalah alat yang digunakan untuk merekam aktivitas listrik jantung.</p></li>
</ul>
<section id="collecting-data-from-web-to-dataframe">
<h2>Collecting data from web to dataframe<a class="headerlink" href="#collecting-data-from-web-to-dataframe" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">ucimlrepo</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: ucimlrepo in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (0.0.7)
Requirement already satisfied: pandas&gt;=1.0.0 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from ucimlrepo) (2.2.1)
Requirement already satisfied: certifi&gt;=2020.12.5 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from ucimlrepo) (2024.2.2)
Requirement already satisfied: numpy&lt;2,&gt;=1.22.4 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from pandas&gt;=1.0.0-&gt;ucimlrepo) (1.26.4)
Requirement already satisfied: python-dateutil&gt;=2.8.2 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from pandas&gt;=1.0.0-&gt;ucimlrepo) (2.8.2)
Requirement already satisfied: pytz&gt;=2020.1 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from pandas&gt;=1.0.0-&gt;ucimlrepo) (2024.1)
Requirement already satisfied: tzdata&gt;=2022.7 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from pandas&gt;=1.0.0-&gt;ucimlrepo) (2024.1)
Requirement already satisfied: six&gt;=1.5 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from python-dateutil&gt;=2.8.2-&gt;pandas&gt;=1.0.0-&gt;ucimlrepo) (1.16.0)
Note: you may need to restart the kernel to use updated packages.
</pre></div>
</div>
</div>
</div>
</section>
<section id="importing-data-from-api-to-dataframe">
<h2>Importing data from API to dataframe<a class="headerlink" href="#importing-data-from-api-to-dataframe" title="Link to this heading">#</a></h2>
<p>Setelah mencari data kemudian melakukan import data ke dataframe</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ucimlrepo</span> <span class="kn">import</span> <span class="n">fetch_ucirepo</span> 
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># fetch dataset </span>
<span class="n">datasets</span> <span class="o">=</span> <span class="n">fetch_ucirepo</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">863</span><span class="p">)</span> 

<span class="c1"># data (as pandas dataframes) </span>
<span class="n">X</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">features</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">targets</span>

<span class="c1"># Convert features and targets to pandas DataFrame</span>
<span class="n">X_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">y_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

<span class="c1"># Add an &#39;ID&#39; column to X_df</span>
<span class="n">X_df</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="n">X_df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

<span class="c1"># Concatenate features and targets horizontally</span>
<span class="n">df_main</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">X_df</span><span class="p">,</span> <span class="n">y_df</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Display the DataFrame as a table</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_main</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>        ID  Age  SystolicBP  DiastolicBP    BS  BodyTemp  HeartRate  RiskLevel
0        0   25         130           80  15.0      98.0         86  high risk
1        1   35         140           90  13.0      98.0         70  high risk
2        2   29          90           70   8.0     100.0         80  high risk
3        3   30         140           85   7.0      98.0         70  high risk
4        4   35         120           60   6.1      98.0         76   low risk
...    ...  ...         ...          ...   ...       ...        ...        ...
1009  1009   22         120           60  15.0      98.0         80  high risk
1010  1010   55         120           90  18.0      98.0         60  high risk
1011  1011   35          85           60  19.0      98.0         86  high risk
1012  1012   43         120           90  18.0      98.0         70  high risk
1013  1013   32         120           65   6.0     101.0         76   mid risk

[1014 rows x 8 columns]
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Kemudian menampilkan seluruh baris data di dataframe df_main</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_main</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>Age</th>
      <th>SystolicBP</th>
      <th>DiastolicBP</th>
      <th>BS</th>
      <th>BodyTemp</th>
      <th>HeartRate</th>
      <th>RiskLevel</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>25</td>
      <td>130</td>
      <td>80</td>
      <td>15.0</td>
      <td>98.0</td>
      <td>86</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>35</td>
      <td>140</td>
      <td>90</td>
      <td>13.0</td>
      <td>98.0</td>
      <td>70</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>29</td>
      <td>90</td>
      <td>70</td>
      <td>8.0</td>
      <td>100.0</td>
      <td>80</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>30</td>
      <td>140</td>
      <td>85</td>
      <td>7.0</td>
      <td>98.0</td>
      <td>70</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>35</td>
      <td>120</td>
      <td>60</td>
      <td>6.1</td>
      <td>98.0</td>
      <td>76</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1009</th>
      <td>1009</td>
      <td>22</td>
      <td>120</td>
      <td>60</td>
      <td>15.0</td>
      <td>98.0</td>
      <td>80</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>1010</th>
      <td>1010</td>
      <td>55</td>
      <td>120</td>
      <td>90</td>
      <td>18.0</td>
      <td>98.0</td>
      <td>60</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>1011</th>
      <td>1011</td>
      <td>35</td>
      <td>85</td>
      <td>60</td>
      <td>19.0</td>
      <td>98.0</td>
      <td>86</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>1012</th>
      <td>1012</td>
      <td>43</td>
      <td>120</td>
      <td>90</td>
      <td>18.0</td>
      <td>98.0</td>
      <td>70</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>1013</th>
      <td>1013</td>
      <td>32</td>
      <td>120</td>
      <td>65</td>
      <td>6.0</td>
      <td>101.0</td>
      <td>76</td>
      <td>mid risk</td>
    </tr>
  </tbody>
</table>
<p>1014 rows × 8 columns</p>
</div></div></div>
</div>
</section>
<section id="identifikasi-data">
<h2>Identifikasi data<a class="headerlink" href="#identifikasi-data" title="Link to this heading">#</a></h2>
<p>Konsep macam-macam tipe data</p>
<p>Atribut adalah bidang data, yang mewakili karakteristik atau fitur objek data. Hal ini berarti atribut, dimensi, fitur, dan variabel yang sering digunakan secara bergantian dalam literatur.</p>
<ul class="simple">
<li><p>Nominal attributes berarti atribut yang nilainya berupa simbol atau nama yang merepresentasikan kategori atau status tertentu tanpa urutan yang berarti.</p></li>
</ul>
<ul class="simple">
<li><p>Binary attributes berarti atribut nominal dengan dua kategori atau status, biasanya 0 dan 1.</p></li>
</ul>
<ul class="simple">
<li><p>Ordinal attributes berarti atribut yang nilainya memiliki urutan yang berarti atau ranking, namun selisih antara nilai-nilai tersebut tidak diketahui.</p></li>
</ul>
<ul class="simple">
<li><p>Numeric attributes berarti atribut kuantitatif yang diukur dalam nilai integer atau real.</p></li>
</ul>
<p>Mengamati secara langsung dari data yang diperoleh dari Maternal Health Risk dataset dan mendeskripsikan langsung jumlah kolom, nama kolom, jumlah data, missing values, dan type data dari setiap kolom data tersebut</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_main</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 1014 entries, 0 to 1013
Data columns (total 8 columns):
 #   Column       Non-Null Count  Dtype  
---  ------       --------------  -----  
 0   ID           1014 non-null   int64  
 1   Age          1014 non-null   int64  
 2   SystolicBP   1014 non-null   int64  
 3   DiastolicBP  1014 non-null   int64  
 4   BS           1014 non-null   float64
 5   BodyTemp     1014 non-null   float64
 6   HeartRate    1014 non-null   int64  
 7   RiskLevel    1014 non-null   object 
dtypes: float64(2), int64(5), object(1)
memory usage: 63.5+ KB
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_main</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>Age</th>
      <th>SystolicBP</th>
      <th>DiastolicBP</th>
      <th>BS</th>
      <th>BodyTemp</th>
      <th>HeartRate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>1014.000000</td>
      <td>1014.000000</td>
      <td>1014.000000</td>
      <td>1014.000000</td>
      <td>1014.000000</td>
      <td>1014.000000</td>
      <td>1014.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>506.500000</td>
      <td>29.871795</td>
      <td>113.198225</td>
      <td>76.460552</td>
      <td>8.725986</td>
      <td>98.665089</td>
      <td>74.301775</td>
    </tr>
    <tr>
      <th>std</th>
      <td>292.860888</td>
      <td>13.474386</td>
      <td>18.403913</td>
      <td>13.885796</td>
      <td>3.293532</td>
      <td>1.371384</td>
      <td>8.088702</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.000000</td>
      <td>10.000000</td>
      <td>70.000000</td>
      <td>49.000000</td>
      <td>6.000000</td>
      <td>98.000000</td>
      <td>7.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>253.250000</td>
      <td>19.000000</td>
      <td>100.000000</td>
      <td>65.000000</td>
      <td>6.900000</td>
      <td>98.000000</td>
      <td>70.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>506.500000</td>
      <td>26.000000</td>
      <td>120.000000</td>
      <td>80.000000</td>
      <td>7.500000</td>
      <td>98.000000</td>
      <td>76.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>759.750000</td>
      <td>39.000000</td>
      <td>120.000000</td>
      <td>90.000000</td>
      <td>8.000000</td>
      <td>98.000000</td>
      <td>80.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1013.000000</td>
      <td>70.000000</td>
      <td>160.000000</td>
      <td>100.000000</td>
      <td>19.000000</td>
      <td>103.000000</td>
      <td>90.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Dari hasil kode diatas yang merupakan tabel dari dataset, kita bisa menyimpulkan bahwa data ini memiliki 1014 baris dan 8 kolom</p>
<p>Untuk fitur dari dataset tersebut ada 6 yaitu seperti yang disebutkan diatas: Age, SystolicBP, DiastolicBP, BS, BodyTemp, HeartRate. Sedangkan untuk targetnya adalah RiskLevel.</p>
<p>untuk menganalisis faktor risiko ibu hamil</p>
<p>Penjelasan dari setiap fitur yang ada pada tabel diatas:</p>
<ul class="simple">
<li><p>Target : “RiskLevel” dengan tipe data Categorical, adalah prediksi tingkat risiko ketika dalam masa kehamilan dengan mempertimbangkan fitur sebelumnya.</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Categorical Variable: Risk Level.

Numerical Variable: Age, SystolicBP, DiastolicBP, BS, BodyTemp, HeartRate.
</pre></div>
</div>
<p>Mengimport library yang diperlukan untuk tahap-tahap yang akan dilakukan selanjutnya</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span> <span class="k">as</span> <span class="n">split</span><span class="p">,</span> <span class="n">GridSearchCV</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">accuracy_score</span><span class="p">,</span> <span class="n">confusion_matrix</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Persentase dan jumlah dari Risk Level yang disajikan dalam diagram pie dan diagram batang</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p_colors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">]</span>
<span class="n">risk_order</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;low risk&quot;</span><span class="p">,</span> <span class="s2">&quot;mid risk&quot;</span><span class="p">,</span> <span class="s2">&quot;high risk&quot;</span><span class="p">]</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">df_main</span><span class="p">[</span><span class="s2">&quot;RiskLevel&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;pie&quot;</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">risk_order</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">p_colors</span><span class="p">,</span> <span class="n">explode</span><span class="o">=</span><span class="p">[</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span>  <span class="mf">0.05</span><span class="p">],</span> <span class="n">autopct</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%1.1f%%</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">shadow</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Risk Level Pie Chart&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="n">count</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;RiskLevel&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df_main</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">order</span><span class="o">=</span><span class="n">risk_order</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">p_colors</span><span class="p">)</span>
<span class="k">for</span> <span class="n">bar</span> <span class="ow">in</span> <span class="n">count</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
    <span class="n">count</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="nb">format</span><span class="p">(</span><span class="n">bar</span><span class="o">.</span><span class="n">get_height</span><span class="p">()),</span>
        <span class="p">(</span><span class="n">bar</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span> <span class="o">+</span> <span class="n">bar</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
        <span class="n">bar</span><span class="o">.</span><span class="n">get_height</span><span class="p">()),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
        <span class="n">size</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
        <span class="n">textcoords</span><span class="o">=</span><span class="s1">&#39;offset points&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Risk Level Bar Chart&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\ahmad\AppData\Local\Temp\ipykernel_18208\1888174911.py:9: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  count = sns.countplot(x=&quot;RiskLevel&quot;, data=df_main, ax=ax[1], order=risk_order, palette=p_colors)
</pre></div>
</div>
<img alt="_images/b87a19a0e029eb4ce05e69545bb2dc510489b5aed660bef52aedb57d76f73458.png" src="_images/b87a19a0e029eb4ce05e69545bb2dc510489b5aed660bef52aedb57d76f73458.png" />
</div>
</div>
<p>Sepertinya sebagian besar ibu hamil dalam kumpulan data ini sebagian besar memiliki risiko kesehatan yang rendah. Dari 1014 data hasil  observasi, 406 (40%) ibu hamil mempunyai risiko rendah, 336 (33,1%) memiliki risiko menengah, dan 272 (26,8%) memiliki risiko tinggi. Kami akan mengeksplorasi data untuk mendapatkan lebih banyak wawasan dan melihat mengapa ibu hamil memiliki risiko kesehatan yang berbeda. Kami akan mencoba memeriksa setiap variabel yang dapat mempengaruhinya.</p>
</section>
<section id="tabel-distribusi">
<h2>Tabel Distribusi<a class="headerlink" href="#tabel-distribusi" title="Link to this heading">#</a></h2>
<p>pada tahap ini, akan disajikan tabel distribusi setiap kolom data dari dataset yang telah diambil</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Mengambil semua kolom fitur</span>
<span class="n">features</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>

<span class="c1"># Menghitung jumlah subplot yang diperlukan</span>
<span class="n">num_features</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">features</span><span class="p">)</span>
<span class="n">num_rows</span> <span class="o">=</span> <span class="p">(</span><span class="n">num_features</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>  <span class="c1"># Pembulatan ke atas untuk jumlah baris</span>

<span class="c1"># Membuat subplot sesuai dengan jumlah fitur</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">num_rows</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">num_rows</span><span class="o">*</span><span class="mi">4</span><span class="p">))</span>

<span class="c1"># Melakukan plotting untuk setiap fitur</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">feature</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">features</span><span class="p">):</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">i</span> <span class="o">//</span> <span class="mi">2</span>
    <span class="n">col</span> <span class="o">=</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df_main</span><span class="p">[</span><span class="n">feature</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Distribution of </span><span class="si">{</span><span class="n">feature</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>

<span class="c1"># Menghapus subplot yang tidak terpakai</span>
<span class="k">if</span> <span class="n">num_features</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">delaxes</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="n">num_rows</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="c1"># Menyesuaikan layout</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>

<span class="c1"># Menampilkan plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/272c5eedc05a3ff71fe30ab588b166e2e259260dad6bc2d1c8349f7bf7b2ce56.png" src="_images/272c5eedc05a3ff71fe30ab588b166e2e259260dad6bc2d1c8349f7bf7b2ce56.png" />
</div>
</div>
<p>Berdasarkan visualisasi tabel distribusi diatas, dapat dilihat bahwa masing-masing fitur memiliki outlier yang dapat diabaikan akan tetapi terdapat outlier yang signifikan dan tidak dapat diabaikan yaitu pada fitur HeartRate.</p>
<section id="prediksi-dan-target">
<h3>Prediksi dan Target<a class="headerlink" href="#prediksi-dan-target" title="Link to this heading">#</a></h3>
<p>Kami akan menggunakan histogram dengan pemetaan untuk memvisualisasikan distribusi data variabel prediktor berdasarkan variabel target. Selain itu, karena variabel prediktor kita hanya memiliki sedikit nilai unik, kita juga dapat menggunakan tab silang panda untuk melihat nilai detailnya.</p>
<ol class="arabic simple">
<li><p>Age -&gt; RiskLevel</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_main</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;Age&quot;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;RiskLevel&quot;</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">hue_order</span><span class="o">=</span><span class="n">risk_order</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">p_colors</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/1fad0bc3d64a88f1d61b94c70de7a146738d2cb5c67684f19f61409a1170b968.png" src="_images/1fad0bc3d64a88f1d61b94c70de7a146738d2cb5c67684f19f61409a1170b968.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df_main</span><span class="o">.</span><span class="n">RiskLevel</span><span class="p">,</span> <span class="n">df_main</span><span class="o">.</span><span class="n">Age</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Age</th>
      <th>10</th>
      <th>12</th>
      <th>13</th>
      <th>14</th>
      <th>15</th>
      <th>16</th>
      <th>17</th>
      <th>18</th>
      <th>19</th>
      <th>20</th>
      <th>...</th>
      <th>54</th>
      <th>55</th>
      <th>56</th>
      <th>59</th>
      <th>60</th>
      <th>62</th>
      <th>63</th>
      <th>65</th>
      <th>66</th>
      <th>70</th>
    </tr>
    <tr>
      <th>RiskLevel</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>high risk</th>
      <td>0</td>
      <td>7</td>
      <td>3</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>24</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>...</td>
      <td>9</td>
      <td>17</td>
      <td>1</td>
      <td>0</td>
      <td>7</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>low risk</th>
      <td>2</td>
      <td>15</td>
      <td>2</td>
      <td>0</td>
      <td>56</td>
      <td>10</td>
      <td>18</td>
      <td>8</td>
      <td>28</td>
      <td>11</td>
      <td>...</td>
      <td>0</td>
      <td>12</td>
      <td>0</td>
      <td>2</td>
      <td>13</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>mid risk</th>
      <td>2</td>
      <td>13</td>
      <td>7</td>
      <td>0</td>
      <td>4</td>
      <td>6</td>
      <td>21</td>
      <td>11</td>
      <td>37</td>
      <td>11</td>
      <td>...</td>
      <td>3</td>
      <td>8</td>
      <td>0</td>
      <td>0</td>
      <td>14</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 50 columns</p>
</div></div></div>
</div>
<p>Observasi :</p>
<ul class="simple">
<li><p>Ibu hamil berusia 24 tahun kebawah sebagian besar mempunyai risiko kesehatan yang rendah.</p></li>
</ul>
<ul class="simple">
<li><p>Risiko kesehatan akan mulai meningkat ketika wanita mulai memasuki umur 25 tahun keatas.</p></li>
</ul>
<ul class="simple">
<li><p>Yang mengejutkan, risiko kesehatan dari wanita hamil diatas 59 tahun mengalami penurunan</p></li>
</ul>
<ol class="arabic simple" start="2">
<li><p>SystollicBP -&gt; RiskLevel</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_main</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;SystolicBP&quot;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;RiskLevel&quot;</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">hue_order</span><span class="o">=</span><span class="n">risk_order</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">p_colors</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/a96c390cf4bbfcd0b4cdf1980ae3fe0121a73547925951b82bb0a5a5b9afdcaf.png" src="_images/a96c390cf4bbfcd0b4cdf1980ae3fe0121a73547925951b82bb0a5a5b9afdcaf.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df_main</span><span class="o">.</span><span class="n">RiskLevel</span><span class="p">,</span> <span class="n">df_main</span><span class="o">.</span><span class="n">SystolicBP</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>SystolicBP</th>
      <th>70</th>
      <th>75</th>
      <th>76</th>
      <th>78</th>
      <th>80</th>
      <th>83</th>
      <th>85</th>
      <th>90</th>
      <th>95</th>
      <th>99</th>
      <th>100</th>
      <th>110</th>
      <th>115</th>
      <th>120</th>
      <th>129</th>
      <th>130</th>
      <th>135</th>
      <th>140</th>
      <th>160</th>
    </tr>
    <tr>
      <th>RiskLevel</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>high risk</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>13</td>
      <td>33</td>
      <td>1</td>
      <td>0</td>
      <td>5</td>
      <td>8</td>
      <td>0</td>
      <td>70</td>
      <td>0</td>
      <td>12</td>
      <td>3</td>
      <td>115</td>
      <td>10</td>
    </tr>
    <tr>
      <th>low risk</th>
      <td>5</td>
      <td>8</td>
      <td>16</td>
      <td>3</td>
      <td>5</td>
      <td>0</td>
      <td>11</td>
      <td>72</td>
      <td>8</td>
      <td>2</td>
      <td>65</td>
      <td>2</td>
      <td>0</td>
      <td>208</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>mid risk</th>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>19</td>
      <td>49</td>
      <td>3</td>
      <td>0</td>
      <td>22</td>
      <td>9</td>
      <td>8</td>
      <td>171</td>
      <td>0</td>
      <td>48</td>
      <td>0</td>
      <td>5</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Observasi :</p>
<ul class="simple">
<li><p>Ibu hamil dengan tekanan darah diatas &gt;= 100 mmHg sebagian besar memiliki risiko kesehatan yang rendah.</p></li>
</ul>
<ul class="simple">
<li><p>Semakin tinggi tekanan darah ibu hamil, semakin tinggi pula risiko kesehatannya.</p></li>
</ul>
<ol class="arabic simple" start="3">
<li><p>DiastolicBP -&gt;RiskLevel</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_main</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;DiastolicBP&quot;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;RiskLevel&quot;</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">hue_order</span><span class="o">=</span><span class="n">risk_order</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">p_colors</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/84a4f4e7b753ba052349614b014add2e2668596e79a5f04d82409867061c0766.png" src="_images/84a4f4e7b753ba052349614b014add2e2668596e79a5f04d82409867061c0766.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df_main</span><span class="o">.</span><span class="n">RiskLevel</span><span class="p">,</span> <span class="n">df_main</span><span class="o">.</span><span class="n">DiastolicBP</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>DiastolicBP</th>
      <th>49</th>
      <th>50</th>
      <th>60</th>
      <th>63</th>
      <th>65</th>
      <th>68</th>
      <th>69</th>
      <th>70</th>
      <th>75</th>
      <th>76</th>
      <th>80</th>
      <th>85</th>
      <th>89</th>
      <th>90</th>
      <th>95</th>
      <th>100</th>
    </tr>
    <tr>
      <th>RiskLevel</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>high risk</th>
      <td>0</td>
      <td>0</td>
      <td>34</td>
      <td>2</td>
      <td>14</td>
      <td>0</td>
      <td>1</td>
      <td>10</td>
      <td>12</td>
      <td>0</td>
      <td>38</td>
      <td>10</td>
      <td>0</td>
      <td>48</td>
      <td>23</td>
      <td>80</td>
    </tr>
    <tr>
      <th>low risk</th>
      <td>25</td>
      <td>16</td>
      <td>75</td>
      <td>2</td>
      <td>41</td>
      <td>2</td>
      <td>0</td>
      <td>38</td>
      <td>15</td>
      <td>3</td>
      <td>96</td>
      <td>24</td>
      <td>1</td>
      <td>58</td>
      <td>9</td>
      <td>1</td>
    </tr>
    <tr>
      <th>mid risk</th>
      <td>0</td>
      <td>8</td>
      <td>65</td>
      <td>4</td>
      <td>32</td>
      <td>0</td>
      <td>0</td>
      <td>52</td>
      <td>11</td>
      <td>0</td>
      <td>92</td>
      <td>15</td>
      <td>0</td>
      <td>47</td>
      <td>4</td>
      <td>6</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Observasi :</p>
<ul class="simple">
<li><p>Ibu hamil dengan tekanan darah &lt;= 90 sebagian besar memiliki risiko kesehatan yang rendah.</p></li>
</ul>
<ul class="simple">
<li><p>Semakin tinggi tekanan darah ibu hamil, semakin tinggi pula risiko kesehatannya.</p></li>
</ul>
<ul class="simple">
<li><p>Variabel ini memiliki pola yang hampir sama dengan SystolicBP. Hal ini tidak mengherankan karena keduanya sangat berkorelasi.</p></li>
</ul>
<ol class="arabic simple" start="4">
<li><p>BS -&gt; RiskLevel</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_main</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;BS&quot;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;RiskLevel&quot;</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">hue_order</span><span class="o">=</span><span class="n">risk_order</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">p_colors</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/f8bc6fd566311d3e0a36275c5468bc15afe66199bb8e55e09c81a21f80681bd4.png" src="_images/f8bc6fd566311d3e0a36275c5468bc15afe66199bb8e55e09c81a21f80681bd4.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df_main</span><span class="o">.</span><span class="n">RiskLevel</span><span class="p">,</span> <span class="n">df_main</span><span class="o">.</span><span class="n">BS</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>BS</th>
      <th>6.0</th>
      <th>6.1</th>
      <th>6.3</th>
      <th>6.4</th>
      <th>6.5</th>
      <th>6.6</th>
      <th>6.7</th>
      <th>6.8</th>
      <th>6.9</th>
      <th>7.0</th>
      <th>...</th>
      <th>9.0</th>
      <th>10.0</th>
      <th>11.0</th>
      <th>12.0</th>
      <th>13.0</th>
      <th>15.0</th>
      <th>16.0</th>
      <th>17.0</th>
      <th>18.0</th>
      <th>19.0</th>
    </tr>
    <tr>
      <th>RiskLevel</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>high risk</th>
      <td>0</td>
      <td>2</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>10</td>
      <td>8</td>
      <td>9</td>
      <td>...</td>
      <td>12</td>
      <td>4</td>
      <td>40</td>
      <td>12</td>
      <td>9</td>
      <td>49</td>
      <td>8</td>
      <td>5</td>
      <td>25</td>
      <td>22</td>
    </tr>
    <tr>
      <th>low risk</th>
      <td>7</td>
      <td>32</td>
      <td>0</td>
      <td>8</td>
      <td>1</td>
      <td>2</td>
      <td>10</td>
      <td>37</td>
      <td>47</td>
      <td>29</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>mid risk</th>
      <td>14</td>
      <td>19</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>23</td>
      <td>41</td>
      <td>58</td>
      <td>41</td>
      <td>...</td>
      <td>19</td>
      <td>0</td>
      <td>8</td>
      <td>6</td>
      <td>0</td>
      <td>5</td>
      <td>9</td>
      <td>0</td>
      <td>4</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 29 columns</p>
</div></div></div>
</div>
<p>Observasi :</p>
<ul class="simple">
<li><p>Hampir semua ibu hamil yang memiliki kadar glukosa darah &gt;= 8 mempunyai risiko kesehatan yang tinggi.</p></li>
</ul>
<ul class="simple">
<li><p>Namun sebaliknya, yang memiliki kadar glukosa darah &lt; 8 mempunyai risiko kesehatan yang rendah.</p></li>
</ul>
<ol class="arabic simple" start="5">
<li><p>BodyTemp -&gt; RiskLevel</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_main</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;BodyTemp&quot;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;RiskLevel&quot;</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">hue_order</span><span class="o">=</span><span class="n">risk_order</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">p_colors</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/82527a629f736416ecdb41208c6681a118ef73390edd7622158d082e3338791a.png" src="_images/82527a629f736416ecdb41208c6681a118ef73390edd7622158d082e3338791a.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df_main</span><span class="o">.</span><span class="n">RiskLevel</span><span class="p">,</span> <span class="n">df_main</span><span class="o">.</span><span class="n">BodyTemp</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>BodyTemp</th>
      <th>98.0</th>
      <th>98.4</th>
      <th>98.6</th>
      <th>99.0</th>
      <th>100.0</th>
      <th>101.0</th>
      <th>102.0</th>
      <th>103.0</th>
    </tr>
    <tr>
      <th>RiskLevel</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>high risk</th>
      <td>199</td>
      <td>0</td>
      <td>1</td>
      <td>2</td>
      <td>5</td>
      <td>34</td>
      <td>25</td>
      <td>6</td>
    </tr>
    <tr>
      <th>low risk</th>
      <td>359</td>
      <td>2</td>
      <td>0</td>
      <td>6</td>
      <td>2</td>
      <td>14</td>
      <td>18</td>
      <td>5</td>
    </tr>
    <tr>
      <th>mid risk</th>
      <td>246</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>13</td>
      <td>50</td>
      <td>23</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Observasi :</p>
<ul class="simple">
<li><p>Kebanyakan ibu hamil tampaknya memiliki suhu tubuh 98 F, yang merupakan suhu tubuh normal.</p></li>
</ul>
<ul class="simple">
<li><p>Ibu hamil dengan suhu tubuh &gt;= 100 F, sebagian besar memiliki risiko kesehatan lebih tinggi</p></li>
</ul>
<ol class="arabic simple" start="6">
<li><p>HeartRate -&gt; RiskLevel</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_main</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;HeartRate&quot;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;RiskLevel&quot;</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">hue_order</span><span class="o">=</span><span class="n">risk_order</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">p_colors</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/98e22ec5b75d64657afa08a81419a7a138d3388418a6f851ea41db5105e6a117.png" src="_images/98e22ec5b75d64657afa08a81419a7a138d3388418a6f851ea41db5105e6a117.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df_main</span><span class="o">.</span><span class="n">RiskLevel</span><span class="p">,</span> <span class="n">df_main</span><span class="o">.</span><span class="n">HeartRate</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>HeartRate</th>
      <th>7</th>
      <th>60</th>
      <th>65</th>
      <th>66</th>
      <th>67</th>
      <th>68</th>
      <th>70</th>
      <th>75</th>
      <th>76</th>
      <th>77</th>
      <th>78</th>
      <th>80</th>
      <th>82</th>
      <th>86</th>
      <th>88</th>
      <th>90</th>
    </tr>
    <tr>
      <th>RiskLevel</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>high risk</th>
      <td>0</td>
      <td>20</td>
      <td>0</td>
      <td>25</td>
      <td>5</td>
      <td>0</td>
      <td>43</td>
      <td>6</td>
      <td>20</td>
      <td>25</td>
      <td>9</td>
      <td>48</td>
      <td>0</td>
      <td>22</td>
      <td>30</td>
      <td>19</td>
    </tr>
    <tr>
      <th>low risk</th>
      <td>2</td>
      <td>33</td>
      <td>2</td>
      <td>44</td>
      <td>2</td>
      <td>0</td>
      <td>126</td>
      <td>7</td>
      <td>55</td>
      <td>56</td>
      <td>2</td>
      <td>39</td>
      <td>10</td>
      <td>7</td>
      <td>21</td>
      <td>0</td>
    </tr>
    <tr>
      <th>mid risk</th>
      <td>0</td>
      <td>21</td>
      <td>3</td>
      <td>18</td>
      <td>5</td>
      <td>2</td>
      <td>102</td>
      <td>6</td>
      <td>56</td>
      <td>15</td>
      <td>35</td>
      <td>30</td>
      <td>9</td>
      <td>26</td>
      <td>8</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Observasi :</p>
<ul class="simple">
<li><p>Dapat dilihat dari tabel diatas, variabel HeartRate memiliki outlier dengan nilai yang terlihat tidak wajar, yaitu 2 value yang bernilai 7 dari kategori low risk</p></li>
</ul>
<ul class="simple">
<li><p>Risiko kesehatan tampaknya semakin tinggi seiring dengan meningkatnya detak jantung.</p></li>
</ul>
</section>
</section>
<section id="kualitas-data">
<h2>Kualitas Data<a class="headerlink" href="#kualitas-data" title="Link to this heading">#</a></h2>
<section id="missing-values">
<h3>Missing Values<a class="headerlink" href="#missing-values" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Mencari missing value apakah ada missing value di data ini</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_main</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ID             0
Age            0
SystolicBP     0
DiastolicBP    0
BS             0
BodyTemp       0
HeartRate      0
RiskLevel      0
dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Bisa dilihat semua colom menunjukan tidak adanya missing value di data ini</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">missing_values</span> <span class="o">=</span> <span class="n">df_main</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span>
<span class="n">missing_values</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">missing_values</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>Age</th>
      <th>SystolicBP</th>
      <th>DiastolicBP</th>
      <th>BS</th>
      <th>BodyTemp</th>
      <th>HeartRate</th>
      <th>RiskLevel</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1</th>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>2</th>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>3</th>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>4</th>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1009</th>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1010</th>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1011</th>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1012</th>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1013</th>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
<p>1014 rows × 8 columns</p>
</div></div></div>
</div>
<p>Karena tidak terdapat missing values dalam data tersebut, kita dapat menganggap data telah bersih sehingga tidak perlu dilakukan inputasi missing values.</p>
<p>Import library yang dibutuhkan untuk mendeteksi outlier menggunakan perhitungan LOF.</p>
</section>
<section id="deteksi-outlier">
<h3>Deteksi Outlier<a class="headerlink" href="#deteksi-outlier" title="Link to this heading">#</a></h3>
<p>Lalu, kami melakukan deteksi outlier, untuk memperbaiki kualitas data.</p>
<p>Menurut referensi yang didapat dari buku “Data Mining : Concept and Technique”:</p>
<p>Link: <a class="reference external" href="https://myweb.sabanciuniv.edu/rdehkharghani/files/2016/02/The-Morgan-Kaufmann-Series-in-Data-Management-Systems-Jiawei-Han-Micheline-Kamber-Jian-Pei-Data-Mining.-Concepts-and-Techniques-3rd-Edition-Morgan-Kaufmann-2011.pdf">https://myweb.sabanciuniv.edu/rdehkharghani/files/2016/02/The-Morgan-Kaufmann-Series-in-Data-Management-Systems-Jiawei-Han-Micheline-Kamber-Jian-Pei-Data-Mining.-Concepts-and-Techniques-3rd-Edition-Morgan-Kaufmann-2011.pdf</a></p>
<p>Local Outlier Factor (LOF) adalah metode deteksi outlier yang didasarkan pada kepadatan lokal suatu titik data dalam kaitannya dengan tetangga terdekatnya. Metode ini bertujuan untuk mengidentifikasi outlier lokal dengan membandingkan kepadatan lokal dari suatu titik dengan kepadatan lokal dari tetangga-tetangganya. Berikut adalah komponen utama dan langkah-langkah perhitungan dalam LOF:</p>
<section id="k-tetangga-terdekat-k-nearest-neighbors-k-nn">
<h4>1. K-Tetangga Terdekat (K-Nearest Neighbors, K-NN)<a class="headerlink" href="#k-tetangga-terdekat-k-nearest-neighbors-k-nn" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p><strong>Jarak K (k-distance)</strong>: Jarak dari titik $<span class="math notranslate nohighlight">\( o \)</span><span class="math notranslate nohighlight">\( ke tetangga terdekat ke-k.
\)</span><span class="math notranslate nohighlight">\(
\text{k-distance}(o) = \text{dist}(o, o_k)
\)</span><span class="math notranslate nohighlight">\(
di mana \)</span><span class="math notranslate nohighlight">\( o_k \)</span><span class="math notranslate nohighlight">\( adalah tetangga terdekat ke-k dari \)</span><span class="math notranslate nohighlight">\( o \)</span>$.</p></li>
<li><p><strong>Lingkungan Jarak K (k-distance neighborhood)</strong>: Himpunan titik-titik yang berada dalam jarak K dari $<span class="math notranslate nohighlight">\( o \)</span><span class="math notranslate nohighlight">\(.
\)</span><span class="math notranslate nohighlight">\(
N_k(o) = \{ o' \mid \text{dist}(o, o') \leq \text{k-distance}(o) \}
\)</span>$</p></li>
</ul>
</section>
<section id="jarak-jangkauan-reachability-distance">
<h4>2. Jarak Jangkauan (Reachability Distance)<a class="headerlink" href="#jarak-jangkauan-reachability-distance" title="Link to this heading">#</a></h4>
<p>Jarak jangkauan dari titik $<span class="math notranslate nohighlight">\( o' \)</span><span class="math notranslate nohighlight">\( ke titik \)</span><span class="math notranslate nohighlight">\( o \)</span><span class="math notranslate nohighlight">\( didefinisikan sebagai:
\)</span><span class="math notranslate nohighlight">\(
\text{reachdist}_k(o', o) = \max(\text{k-distance}(o), \text{dist}(o', o))
\)</span>$</p>
</section>
<section id="kepadatan-jangkauan-lokal-local-reachability-density">
<h4>3. Kepadatan Jangkauan Lokal (Local Reachability Density)<a class="headerlink" href="#kepadatan-jangkauan-lokal-local-reachability-density" title="Link to this heading">#</a></h4>
<p>Kepadatan jangkauan lokal $<span class="math notranslate nohighlight">\( lrd_k(o) \)</span><span class="math notranslate nohighlight">\( dari titik \)</span><span class="math notranslate nohighlight">\( o \)</span><span class="math notranslate nohighlight">\( adalah kebalikan dari rata-rata jarak jangkauan dari tetangga terdekatnya:
\)</span><span class="math notranslate nohighlight">\(
lrd_k(o) = \frac{|N_k(o)|}{\sum_{o' \in N_k(o)} \text{reachdist}_k(o', o)}
\)</span>$</p>
</section>
<section id="faktor-outlier-lokal-local-outlier-factor">
<h4>4. Faktor Outlier Lokal (Local Outlier Factor)<a class="headerlink" href="#faktor-outlier-lokal-local-outlier-factor" title="Link to this heading">#</a></h4>
<p>Faktor outlier lokal $<span class="math notranslate nohighlight">\( LOF_k(o) \)</span><span class="math notranslate nohighlight">\( dari titik \)</span><span class="math notranslate nohighlight">\( o \)</span><span class="math notranslate nohighlight">\( adalah rata-rata dari rasio kepadatan jangkauan lokal \)</span><span class="math notranslate nohighlight">\( o \)</span><span class="math notranslate nohighlight">\( terhadap kepadatan jangkauan lokal dari tetangga terdekatnya:
\)</span><span class="math notranslate nohighlight">\(
LOF_k(o) = \frac{\sum_{o' \in N_k(o)} \frac{lrd_k(o')}{lrd_k(o)}}{|N_k(o)|}
\)</span>$</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="kn">import</span> <span class="n">LocalOutlierFactor</span>
</pre></div>
</div>
</div>
</div>
<p>Data outlier sering kali mempengaruhi model data secara umum sehingga pengaruh dari data outlier tersebut harus dikurangi atau dihilangkan. Hal ini merujuk kepda <a class="reference external" href="https://ejurnal.its.ac.id/index.php/sains_seni/article/download/22520/3642">https://ejurnal.its.ac.id/index.php/sains_seni/article/download/22520/3642</a></p>
<p>Proses perhitungan LOF untuk mendeteksi adanya outlier dengan 40 tetangga terdekat menggunakan jarak Euclidean (p=2).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_main_lof</span> <span class="o">=</span> <span class="n">df_main</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># Menggunakan semua kolom fitur untuk deteksi outlier</span>
<span class="n">columns_for_lof</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>

<span class="c1"># Inisialisasi model LOF</span>
<span class="n">lof</span> <span class="o">=</span> <span class="n">LocalOutlierFactor</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Mendeteksi outlier</span>
<span class="n">outlier_scores</span> <span class="o">=</span> <span class="n">lof</span><span class="o">.</span><span class="n">fit_predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">df_main_lof</span><span class="p">[</span><span class="s1">&#39;LOF_Score&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">lof</span><span class="o">.</span><span class="n">negative_outlier_factor_</span>

<span class="c1"># Menampilkan DataFrame dengan skor LOF</span>
<span class="n">df_main_lof</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df_main_lof</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>Age</th>
      <th>SystolicBP</th>
      <th>DiastolicBP</th>
      <th>BS</th>
      <th>BodyTemp</th>
      <th>HeartRate</th>
      <th>RiskLevel</th>
      <th>LOF_Score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>25</td>
      <td>130</td>
      <td>80</td>
      <td>15.0</td>
      <td>98.0</td>
      <td>86</td>
      <td>high risk</td>
      <td>1.379773</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>35</td>
      <td>140</td>
      <td>90</td>
      <td>13.0</td>
      <td>98.0</td>
      <td>70</td>
      <td>high risk</td>
      <td>0.991708</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>29</td>
      <td>90</td>
      <td>70</td>
      <td>8.0</td>
      <td>100.0</td>
      <td>80</td>
      <td>high risk</td>
      <td>1.198120</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>30</td>
      <td>140</td>
      <td>85</td>
      <td>7.0</td>
      <td>98.0</td>
      <td>70</td>
      <td>high risk</td>
      <td>1.102981</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>35</td>
      <td>120</td>
      <td>60</td>
      <td>6.1</td>
      <td>98.0</td>
      <td>76</td>
      <td>low risk</td>
      <td>1.041105</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1009</th>
      <td>1009</td>
      <td>22</td>
      <td>120</td>
      <td>60</td>
      <td>15.0</td>
      <td>98.0</td>
      <td>80</td>
      <td>high risk</td>
      <td>1.223653</td>
    </tr>
    <tr>
      <th>1010</th>
      <td>1010</td>
      <td>55</td>
      <td>120</td>
      <td>90</td>
      <td>18.0</td>
      <td>98.0</td>
      <td>60</td>
      <td>high risk</td>
      <td>1.173908</td>
    </tr>
    <tr>
      <th>1011</th>
      <td>1011</td>
      <td>35</td>
      <td>85</td>
      <td>60</td>
      <td>19.0</td>
      <td>98.0</td>
      <td>86</td>
      <td>high risk</td>
      <td>1.375510</td>
    </tr>
    <tr>
      <th>1012</th>
      <td>1012</td>
      <td>43</td>
      <td>120</td>
      <td>90</td>
      <td>18.0</td>
      <td>98.0</td>
      <td>70</td>
      <td>high risk</td>
      <td>1.039058</td>
    </tr>
    <tr>
      <th>1013</th>
      <td>1013</td>
      <td>32</td>
      <td>120</td>
      <td>65</td>
      <td>6.0</td>
      <td>101.0</td>
      <td>76</td>
      <td>mid risk</td>
      <td>1.014277</td>
    </tr>
  </tbody>
</table>
<p>1014 rows × 9 columns</p>
</div></div></div>
</div>
<p>Menampilkan beberapa data yang teridentifikasi sebagai outlier (dengan skor LOF negatif).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Outlier data:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df_main_lof</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">outlier_scores</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ID </span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;ID&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, LOF Score: </span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;LOF_Score&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Outlier data:
ID 30, LOF Score: 1.55
ID 111, LOF Score: 1.58
ID 152, LOF Score: 1.65
ID 172, LOF Score: 1.55
ID 248, LOF Score: 1.70
ID 268, LOF Score: 1.55
ID 326, LOF Score: 1.50
ID 338, LOF Score: 1.53
ID 348, LOF Score: 1.53
ID 486, LOF Score: 1.58
ID 499, LOF Score: 5.73
ID 544, LOF Score: 1.55
ID 589, LOF Score: 1.55
ID 653, LOF Score: 1.59
ID 671, LOF Score: 1.59
ID 672, LOF Score: 1.59
ID 687, LOF Score: 1.65
ID 698, LOF Score: 1.59
ID 703, LOF Score: 1.59
ID 828, LOF Score: 1.55
ID 908, LOF Score: 5.73
ID 935, LOF Score: 1.55
ID 959, LOF Score: 1.65
ID 992, LOF Score: 1.70
</pre></div>
</div>
</div>
</div>
<p>Berdasarkan output di atas, terlihat bahwa terdapat 2 data dengan nilai LOF yang sangat jauh yaitu data ID 499 dan ID 908.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Menampilkan data dengan ID 499 dan 908</span>
<span class="n">data_outlier</span> <span class="o">=</span> <span class="n">df_main_lof</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_main_lof</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="mi">499</span><span class="p">,</span> <span class="mi">908</span><span class="p">])]</span>

<span class="n">data_outlier</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>Age</th>
      <th>SystolicBP</th>
      <th>DiastolicBP</th>
      <th>BS</th>
      <th>BodyTemp</th>
      <th>HeartRate</th>
      <th>RiskLevel</th>
      <th>LOF_Score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>499</th>
      <td>499</td>
      <td>16</td>
      <td>120</td>
      <td>75</td>
      <td>7.9</td>
      <td>98.0</td>
      <td>7</td>
      <td>low risk</td>
      <td>5.73151</td>
    </tr>
    <tr>
      <th>908</th>
      <td>908</td>
      <td>16</td>
      <td>120</td>
      <td>75</td>
      <td>7.9</td>
      <td>98.0</td>
      <td>7</td>
      <td>low risk</td>
      <td>5.73151</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="data-preprocessing">
<h1>DATA PREPROCESSING<a class="headerlink" href="#data-preprocessing" title="Link to this heading">#</a></h1>
<p>Pada data preprocessing kami akan memperbaiki kualitas data karena terdeteksi adanya outlier pada data.</p>
<section id="mengatasi-outlier">
<h2>Mengatasi Outlier<a class="headerlink" href="#mengatasi-outlier" title="Link to this heading">#</a></h2>
<p>Heart rate istirahat normal untuk orang dewasa berkisar antara 60 hingga 100 bpm (beats per Minute), terlebih heart rate istirahat terendah yang tercatat dalam sejarah manusia adalah 25 bpm. Oleh karena itu, 2 data ini akan dihapus yang memiliki nilai heart rate 7 karena nilai tersebut tidak masuk akal, dan kemungkinan besar merupakan kesalahan input.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Menghapus data outlier yang nilai HeartRate-nya 7</span>
<span class="n">df_main_lof</span> <span class="o">=</span> <span class="n">df_main_lof</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">df_main_lof</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">df_main_lof</span><span class="o">.</span><span class="n">HeartRate</span> <span class="o">==</span> <span class="mi">7</span><span class="p">])</span>

<span class="c1"># Menampilkan DataFrame yang telah dihapus barisnya</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;DataFrame setelah menghapus outlier:&quot;</span><span class="p">)</span>
<span class="n">df_main_lof</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DataFrame setelah menghapus outlier:
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>Age</th>
      <th>SystolicBP</th>
      <th>DiastolicBP</th>
      <th>BS</th>
      <th>BodyTemp</th>
      <th>HeartRate</th>
      <th>RiskLevel</th>
      <th>LOF_Score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>25</td>
      <td>130</td>
      <td>80</td>
      <td>15.0</td>
      <td>98.0</td>
      <td>86</td>
      <td>high risk</td>
      <td>1.379773</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>35</td>
      <td>140</td>
      <td>90</td>
      <td>13.0</td>
      <td>98.0</td>
      <td>70</td>
      <td>high risk</td>
      <td>0.991708</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>29</td>
      <td>90</td>
      <td>70</td>
      <td>8.0</td>
      <td>100.0</td>
      <td>80</td>
      <td>high risk</td>
      <td>1.198120</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>30</td>
      <td>140</td>
      <td>85</td>
      <td>7.0</td>
      <td>98.0</td>
      <td>70</td>
      <td>high risk</td>
      <td>1.102981</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>35</td>
      <td>120</td>
      <td>60</td>
      <td>6.1</td>
      <td>98.0</td>
      <td>76</td>
      <td>low risk</td>
      <td>1.041105</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1009</th>
      <td>1009</td>
      <td>22</td>
      <td>120</td>
      <td>60</td>
      <td>15.0</td>
      <td>98.0</td>
      <td>80</td>
      <td>high risk</td>
      <td>1.223653</td>
    </tr>
    <tr>
      <th>1010</th>
      <td>1010</td>
      <td>55</td>
      <td>120</td>
      <td>90</td>
      <td>18.0</td>
      <td>98.0</td>
      <td>60</td>
      <td>high risk</td>
      <td>1.173908</td>
    </tr>
    <tr>
      <th>1011</th>
      <td>1011</td>
      <td>35</td>
      <td>85</td>
      <td>60</td>
      <td>19.0</td>
      <td>98.0</td>
      <td>86</td>
      <td>high risk</td>
      <td>1.375510</td>
    </tr>
    <tr>
      <th>1012</th>
      <td>1012</td>
      <td>43</td>
      <td>120</td>
      <td>90</td>
      <td>18.0</td>
      <td>98.0</td>
      <td>70</td>
      <td>high risk</td>
      <td>1.039058</td>
    </tr>
    <tr>
      <th>1013</th>
      <td>1013</td>
      <td>32</td>
      <td>120</td>
      <td>65</td>
      <td>6.0</td>
      <td>101.0</td>
      <td>76</td>
      <td>mid risk</td>
      <td>1.014277</td>
    </tr>
  </tbody>
</table>
<p>1012 rows × 9 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">X</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>SystolicBP</th>
      <th>DiastolicBP</th>
      <th>BS</th>
      <th>BodyTemp</th>
      <th>HeartRate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>25</td>
      <td>130</td>
      <td>80</td>
      <td>15.0</td>
      <td>98.0</td>
      <td>86</td>
    </tr>
    <tr>
      <th>1</th>
      <td>35</td>
      <td>140</td>
      <td>90</td>
      <td>13.0</td>
      <td>98.0</td>
      <td>70</td>
    </tr>
    <tr>
      <th>2</th>
      <td>29</td>
      <td>90</td>
      <td>70</td>
      <td>8.0</td>
      <td>100.0</td>
      <td>80</td>
    </tr>
    <tr>
      <th>3</th>
      <td>30</td>
      <td>140</td>
      <td>85</td>
      <td>7.0</td>
      <td>98.0</td>
      <td>70</td>
    </tr>
    <tr>
      <th>4</th>
      <td>35</td>
      <td>120</td>
      <td>60</td>
      <td>6.1</td>
      <td>98.0</td>
      <td>76</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1009</th>
      <td>22</td>
      <td>120</td>
      <td>60</td>
      <td>15.0</td>
      <td>98.0</td>
      <td>80</td>
    </tr>
    <tr>
      <th>1010</th>
      <td>55</td>
      <td>120</td>
      <td>90</td>
      <td>18.0</td>
      <td>98.0</td>
      <td>60</td>
    </tr>
    <tr>
      <th>1011</th>
      <td>35</td>
      <td>85</td>
      <td>60</td>
      <td>19.0</td>
      <td>98.0</td>
      <td>86</td>
    </tr>
    <tr>
      <th>1012</th>
      <td>43</td>
      <td>120</td>
      <td>90</td>
      <td>18.0</td>
      <td>98.0</td>
      <td>70</td>
    </tr>
    <tr>
      <th>1013</th>
      <td>32</td>
      <td>120</td>
      <td>65</td>
      <td>6.0</td>
      <td>101.0</td>
      <td>76</td>
    </tr>
  </tbody>
</table>
<p>1014 rows × 6 columns</p>
</div></div></div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="data-modelling">
<h1>DATA MODELLING<a class="headerlink" href="#data-modelling" title="Link to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">X_train_model</span> <span class="o">=</span> <span class="n">df_main_lof</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span><span class="s1">&#39;RiskLevel&#39;</span><span class="p">,</span><span class="s1">&#39;LOF_Score&#39;</span><span class="p">])</span>
<span class="n">Y_train_model</span> <span class="o">=</span> <span class="n">df_main_lof</span><span class="p">[</span><span class="s1">&#39;RiskLevel&#39;</span><span class="p">]</span>

<span class="n">X_train_model</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>SystolicBP</th>
      <th>DiastolicBP</th>
      <th>BS</th>
      <th>BodyTemp</th>
      <th>HeartRate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>25</td>
      <td>130</td>
      <td>80</td>
      <td>15.0</td>
      <td>98.0</td>
      <td>86</td>
    </tr>
    <tr>
      <th>1</th>
      <td>35</td>
      <td>140</td>
      <td>90</td>
      <td>13.0</td>
      <td>98.0</td>
      <td>70</td>
    </tr>
    <tr>
      <th>2</th>
      <td>29</td>
      <td>90</td>
      <td>70</td>
      <td>8.0</td>
      <td>100.0</td>
      <td>80</td>
    </tr>
    <tr>
      <th>3</th>
      <td>30</td>
      <td>140</td>
      <td>85</td>
      <td>7.0</td>
      <td>98.0</td>
      <td>70</td>
    </tr>
    <tr>
      <th>4</th>
      <td>35</td>
      <td>120</td>
      <td>60</td>
      <td>6.1</td>
      <td>98.0</td>
      <td>76</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1009</th>
      <td>22</td>
      <td>120</td>
      <td>60</td>
      <td>15.0</td>
      <td>98.0</td>
      <td>80</td>
    </tr>
    <tr>
      <th>1010</th>
      <td>55</td>
      <td>120</td>
      <td>90</td>
      <td>18.0</td>
      <td>98.0</td>
      <td>60</td>
    </tr>
    <tr>
      <th>1011</th>
      <td>35</td>
      <td>85</td>
      <td>60</td>
      <td>19.0</td>
      <td>98.0</td>
      <td>86</td>
    </tr>
    <tr>
      <th>1012</th>
      <td>43</td>
      <td>120</td>
      <td>90</td>
      <td>18.0</td>
      <td>98.0</td>
      <td>70</td>
    </tr>
    <tr>
      <th>1013</th>
      <td>32</td>
      <td>120</td>
      <td>65</td>
      <td>6.0</td>
      <td>101.0</td>
      <td>76</td>
    </tr>
  </tbody>
</table>
<p>1012 rows × 6 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Y_train_model</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0       high risk
1       high risk
2       high risk
3       high risk
4        low risk
          ...    
1009    high risk
1010    high risk
1011    high risk
1012    high risk
1013     mid risk
Name: RiskLevel, Length: 1012, dtype: object
</pre></div>
</div>
</div>
</div>
<section id="apa-itu-klasifikasi-data">
<h2>Apa itu Klasifikasi data<a class="headerlink" href="#apa-itu-klasifikasi-data" title="Link to this heading">#</a></h2>
<p>Menurut referensi pada buku berjudul  “Data Mining Concept and Techniques” edisi ketiga pada link : link : The-Morgan-Kaufmann-Series-in-Data-Management-Systems-Jiawei-Han-Micheline-Kamber-Jian-Pei-Data-Mining.-Concepts-and-Techniques-3rd-Edition-Morgan-Kaufmann</p>
<p>“Bagaimana cara kerja klasifikasi?” Klasifikasi data merupakan proses dua langkah, yang terdiri dari langkah pembelajaran (di mana model klasifikasi dibangun) dan langkah klasifikasi (di mana model digunakan untuk memprediksi label kelas untuk data tertentu). Prosesnya ditunjukkan untuk data pengajuan pinjaman</p>
<img src="image-20240529-205207.png" width="" align="" /><p>Pada bagian ini akan dilakukan perhitungan pada data testing menggunakan model Gaussian Naive Bayes dan KNN</p>
<p>Konsep Gaussian Naive Bayes</p>
<p>menurut referensi yang didapat dari buku “Data Mining : Concept and Technique”: Link:<a class="reference external" href="https://myweb.sabanciuniv.edu/rdehkharghani/files/2016/02/The-Morgan-Kaufmann-Series-in-Data-Management-Systems-Jiawei-Han-Micheline-Kamber-Jian-Pei-Data-Mining.-Concepts-and-Techniques-3rd-Edition-Morgan-Kaufmann-2011.pdf">https://myweb.sabanciuniv.edu/rdehkharghani/files/2016/02/The-Morgan-Kaufmann-Series-in-Data-Management-Systems-Jiawei-Han-Micheline-Kamber-Jian-Pei-Data-Mining.-Concepts-and-Techniques-3rd-Edition-Morgan-Kaufmann-2011.pdf</a></p>
<p>menjelaskan bahwa Naïve Bayes adalah teknik klasifikasi statistik berdasarkan Teorema Bayes. Ini adalah salah satu algoritma pembelajaran terawasi yang paling sederhana. Pengklasifikasi Naïve Bayes adalah algoritma yang cepat, akurat, dan andal. Pengklasifikasi Naïve Bayes memiliki akurasi dan kecepatan tinggi pada kumpulan data besar.</p>
<p>Algoritma Naïve Bayes terdiri dari dua kata Naïve dan Bayes, yang dapat digambarkan sebagai:</p>
<ul class="simple">
<li><p>Naïve: Disebut Naïve karena mengasumsikan kemunculan suatu ciri tertentu tidak bergantung pada kemunculan ciri lainnya. Misalnya jika buah dikenali berdasarkan warna, bentuk, dan rasa, maka buah yang berwarna merah, bulat, dan manis dikenali sebagai apel. Oleh karena itu, setiap fitur secara individual berkontribusi untuk mengidentifikasi bahwa itu adalah sebuah apel tanpa bergantung satu sama lain.</p></li>
</ul>
<ul class="simple">
<li><p>Bayes: Disebut Bayes karena bergantung pada prinsip Teorema Bayes.</p></li>
</ul>
<p>rumus dari naive bayes :</p>
<img src="Img/rumus naive bayes.png" width="actual" align="" /><ul class="simple">
<li><p>P(H|X) =&gt; probabilitas hipotesis H jika diberi data X. Ini dikenal sebagai probabilitas posterior.</p></li>
</ul>
<ul class="simple">
<li><p>P(X|H) =&gt; probabilitas data X jika hipotesis H benar. Ini dikenal sebagai probabilitas posterior.</p></li>
</ul>
<ul class="simple">
<li><p>P(H) =&gt; kemungkinan hipotesis H benar (apa pun datanya). Ini dikenal sebagai probabilitas sebelumnya dari H.</p></li>
</ul>
<ul class="simple">
<li><p>P(X) =&gt; probabilitas data (terlepas dari hipotesisnya). Ini dikenal sebagai probabilitas sebelumnya.</p></li>
</ul>
</section>
<section id="membuat-model-gaussian-naive-bayes-dengan-code-python">
<h2>Membuat Model Gaussian Naive Bayes dengan Code Python<a class="headerlink" href="#membuat-model-gaussian-naive-bayes-dengan-code-python" title="Link to this heading">#</a></h2>
<p>Mengimport library dari pandas dan sklearn untuk melakukan modelling Gaussian Naive Bayes menggunakan code python</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">sklearn.naive_bayes</span> <span class="kn">import</span> <span class="n">GaussianNB</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">accuracy_score</span>
</pre></div>
</div>
</div>
</div>
<p>Menyalin df_main_lof ke dalam variabel df_main_gnb untuk dilakukan perhitungan Gaussian Naive Bayes dan menampilkan df_main_gnb yang telah disalin sebelumnya</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_main_gnb</span> <span class="o">=</span> <span class="n">df_main_lof</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">df_main_gnb</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>Age</th>
      <th>SystolicBP</th>
      <th>DiastolicBP</th>
      <th>BS</th>
      <th>BodyTemp</th>
      <th>HeartRate</th>
      <th>RiskLevel</th>
      <th>LOF_Score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>25</td>
      <td>130</td>
      <td>80</td>
      <td>15.0</td>
      <td>98.0</td>
      <td>86</td>
      <td>high risk</td>
      <td>1.379773</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>35</td>
      <td>140</td>
      <td>90</td>
      <td>13.0</td>
      <td>98.0</td>
      <td>70</td>
      <td>high risk</td>
      <td>0.991708</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>29</td>
      <td>90</td>
      <td>70</td>
      <td>8.0</td>
      <td>100.0</td>
      <td>80</td>
      <td>high risk</td>
      <td>1.198120</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>30</td>
      <td>140</td>
      <td>85</td>
      <td>7.0</td>
      <td>98.0</td>
      <td>70</td>
      <td>high risk</td>
      <td>1.102981</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>35</td>
      <td>120</td>
      <td>60</td>
      <td>6.1</td>
      <td>98.0</td>
      <td>76</td>
      <td>low risk</td>
      <td>1.041105</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1009</th>
      <td>1009</td>
      <td>22</td>
      <td>120</td>
      <td>60</td>
      <td>15.0</td>
      <td>98.0</td>
      <td>80</td>
      <td>high risk</td>
      <td>1.223653</td>
    </tr>
    <tr>
      <th>1010</th>
      <td>1010</td>
      <td>55</td>
      <td>120</td>
      <td>90</td>
      <td>18.0</td>
      <td>98.0</td>
      <td>60</td>
      <td>high risk</td>
      <td>1.173908</td>
    </tr>
    <tr>
      <th>1011</th>
      <td>1011</td>
      <td>35</td>
      <td>85</td>
      <td>60</td>
      <td>19.0</td>
      <td>98.0</td>
      <td>86</td>
      <td>high risk</td>
      <td>1.375510</td>
    </tr>
    <tr>
      <th>1012</th>
      <td>1012</td>
      <td>43</td>
      <td>120</td>
      <td>90</td>
      <td>18.0</td>
      <td>98.0</td>
      <td>70</td>
      <td>high risk</td>
      <td>1.039058</td>
    </tr>
    <tr>
      <th>1013</th>
      <td>1013</td>
      <td>32</td>
      <td>120</td>
      <td>65</td>
      <td>6.0</td>
      <td>101.0</td>
      <td>76</td>
      <td>mid risk</td>
      <td>1.014277</td>
    </tr>
  </tbody>
</table>
<p>1012 rows × 9 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">features</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">X_train_model</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span>
<span class="n">target</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">Y_train_model</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span>

<span class="n">target</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;RiskLevel&#39;], dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<p>Melakukan pemisahan dataset menjadi dua bagian: set data training dan testing sebesar 20% untuk data testing dan 80% untuk data training. X_train untuk data training(features), X_test untuk data testing(features), y_train untuk data training(targets), y_test untuk data testing(targets).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X_train_model</span><span class="p">,</span> <span class="n">Y_train_model</span><span class="p">,</span> <span class="n">test_size</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">X_test</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>SystolicBP</th>
      <th>DiastolicBP</th>
      <th>BS</th>
      <th>BodyTemp</th>
      <th>HeartRate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>176</th>
      <td>35</td>
      <td>140</td>
      <td>100</td>
      <td>8.0</td>
      <td>98.0</td>
      <td>66</td>
    </tr>
    <tr>
      <th>510</th>
      <td>17</td>
      <td>90</td>
      <td>63</td>
      <td>7.5</td>
      <td>101.0</td>
      <td>70</td>
    </tr>
    <tr>
      <th>846</th>
      <td>36</td>
      <td>120</td>
      <td>90</td>
      <td>7.0</td>
      <td>98.0</td>
      <td>82</td>
    </tr>
    <tr>
      <th>600</th>
      <td>50</td>
      <td>130</td>
      <td>100</td>
      <td>16.0</td>
      <td>98.0</td>
      <td>75</td>
    </tr>
    <tr>
      <th>11</th>
      <td>19</td>
      <td>120</td>
      <td>80</td>
      <td>7.0</td>
      <td>98.0</td>
      <td>70</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>801</th>
      <td>23</td>
      <td>130</td>
      <td>70</td>
      <td>6.8</td>
      <td>98.0</td>
      <td>78</td>
    </tr>
    <tr>
      <th>1013</th>
      <td>32</td>
      <td>120</td>
      <td>65</td>
      <td>6.0</td>
      <td>101.0</td>
      <td>76</td>
    </tr>
    <tr>
      <th>655</th>
      <td>48</td>
      <td>120</td>
      <td>80</td>
      <td>11.0</td>
      <td>98.0</td>
      <td>88</td>
    </tr>
    <tr>
      <th>857</th>
      <td>30</td>
      <td>120</td>
      <td>80</td>
      <td>6.9</td>
      <td>101.0</td>
      <td>76</td>
    </tr>
    <tr>
      <th>288</th>
      <td>26</td>
      <td>85</td>
      <td>60</td>
      <td>6.0</td>
      <td>101.0</td>
      <td>86</td>
    </tr>
  </tbody>
</table>
<p>203 rows × 6 columns</p>
</div></div></div>
</div>
<p>Mengambil irisan x_train dan y_train dari df_main_gnb berdasarkan kolom ID dan disimpan ke dalam file excel dengan nama main_train.csv</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Mendapatkan irisan antara kolom &#39;ID&#39; dari DataFrame df_main_gnb dan data x_train serta y_train</span>
<span class="n">df_train</span> <span class="o">=</span> <span class="n">df_main_gnb</span><span class="p">[[</span><span class="s1">&#39;ID&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">features</span><span class="p">),</span> <span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df_train</span> <span class="o">=</span> <span class="n">df_train</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">y_train</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">target</span><span class="p">),</span> <span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Simpan DataFrame df_train ke dalam file CSV</span>
<span class="n">df_train</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;main_train.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Mengambil irisan x_test dan y_test dari df_main_gnb berdasarkan kolom ID dan disimpan ke dalam file excel dengan nama main_test.csv</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Mendapatkan irisan antara kolom &#39;ID&#39; dari DataFrame df_main_gnb dan data x_test serta y_test</span>
<span class="n">df_test</span> <span class="o">=</span> <span class="n">df_main_gnb</span><span class="p">[[</span><span class="s1">&#39;ID&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">X_test</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">features</span><span class="p">),</span> <span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df_test</span> <span class="o">=</span> <span class="n">df_test</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">target</span><span class="p">),</span> <span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Simpan DataFrame df_test ke dalam file CSV</span>
<span class="n">df_test</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;main_test.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>konsep akurasi model</p>
<p>Menggunakan data training untuk mendapatkan pengklasifikasi dan kemudian memperkirakan keakuratan model pembelajaran yang dihasilkan dapat mengakibatkan perkiraan terlalu optimistis yang menyesatkan karena terlalu mengkhususkan algoritma pembelajaran pada data.  Sebaliknya, lebih baik mengukur keakuratan pengklasifikasi pada set pengujian yang terdiri dari tupel berlabel kelas yang tidak digunakan untuk melatih model.</p>
<p>Menurut referensi pada buku berjudul  “Data Mining Concept and Techniques” edisi ketiga pada link : link : The-Morgan-Kaufmann-Series-in-Data-Management-Systems-Jiawei-Han-Micheline-Kamber-Jian-Pei-Data-Mining.-Concepts-and-Techniques-3rd-Edition-Morgan-Kaufmann</p>
<div class="math notranslate nohighlight">
\[\Huge accuracy = \frac{TP + TN}{P + N}\]</div>
<p>maka kita bisa menggunakan confusion matrix seperti berikut</p>
<img src="image-20240529-211947.png" width="" align="" /><img src="image-20240529-212506.png" width="" align="" /><p>Maka : kita bisa menghitung akurasi dari suatu model dengan menentukan P’ dan N’ , dimana Tuple postifif ditambah Tuple negatif kita bagi dengan total Tuple baru kita mendapat akurasi model</p>
<p>Membuat model gaussian naive bayes dengan data training, setelah membuat model berdasarkan data training, lalu memprediksi data testing menggunakan model yang sebelumnya sudah dibuat menggunakan data training.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gaussian_model</span> <span class="o">=</span> <span class="n">GaussianNB</span><span class="p">()</span>
<span class="n">gaussian_model</span> <span class="o">=</span> <span class="n">gaussian_model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">y_pred</span> <span class="o">=</span> <span class="n">gaussian_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="n">accuracy_gnb</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_pred</span><span class="p">,</span> <span class="n">y_test</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Akurasi: </span><span class="si">{</span><span class="n">accuracy_gnb</span><span class="si">:</span><span class="s1">.2%</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Akurasi: 63.05%
</pre></div>
</div>
</div>
</div>
<p>Berdasarkan nilai diatas tingkat akurasinya 63,05%. Ini menunjukkan model tersebut dapat memprediksi dengan benar sekitar 63,05% kasus yang diberikan.</p>
<p>Mencoba memprediksi menggunakan model gaussian yang telah dibuat sebelumnya dengan data input 30, 140, 85, 7, 98, 70 yang berasal dari data id ke-3.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hasil Prediksi Class: &#39;</span><span class="p">,</span> <span class="n">gaussian_model</span><span class="o">.</span><span class="n">predict</span><span class="p">([[</span><span class="mi">30</span><span class="p">,</span><span class="mi">140</span><span class="p">,</span><span class="mi">85</span><span class="p">,</span><span class="mf">7.0</span><span class="p">,</span><span class="mf">98.0</span><span class="p">,</span><span class="mi">70</span><span class="p">]]))</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Hasil Prediksi Class:  [&#39;low risk&#39;]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\ahmad\AppData\Local\Programs\Python\Python310\lib\site-packages\sklearn\base.py:493: UserWarning: X does not have valid feature names, but GaussianNB was fitted with feature names
  warnings.warn(
</pre></div>
</div>
</div>
</div>
<p>Membuat dataframe dari Dataframe dataset yang asli dan disimpan ke df_pred_gnb untuk dilakukan prediksi. Menambahkan kolom baru Target_before_prediciton yang diisi dengan data testing dan Predicted_Target yang diisi dengan data hasil prediksi. Menggabungkan kolom ID dari df_test dan df_pred_gnb. Mengurutkan df_pred berdasarkan kolom ID. Menampilkan ID, Target_before_prediciton, dan Predicted_target dari df_pred_gnb.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Membuat DataFrame df_pred dari y_test dan y_pred</span>
<span class="n">df_pred_gnb</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">df_pred_gnb</span><span class="p">[</span><span class="s1">&#39;Target_before_prediction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">y_test</span>
<span class="n">df_pred_gnb</span><span class="p">[</span><span class="s1">&#39;Predicted_Target&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">y_pred</span>

<span class="c1"># Menggabungkan kolom &#39;ID&#39; dari df_test dengan DataFrame df_pred_gnb</span>
<span class="n">df_pred_gnb</span><span class="p">[</span><span class="s1">&#39;ID&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_test</span><span class="p">[</span><span class="s1">&#39;ID&#39;</span><span class="p">]</span>

<span class="c1"># Mengurutkan DataFrame berdasarkan kolom &#39;ID&#39;</span>
<span class="n">df_pred_gnb</span> <span class="o">=</span> <span class="n">df_pred_gnb</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;ID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Menampilkan DataFrame df_pred_gnb yang diurutkan</span>
<span class="n">df_pred_gnb</span> <span class="o">=</span> <span class="n">df_pred_gnb</span><span class="p">[[</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Target_before_prediction&#39;</span><span class="p">,</span> <span class="s1">&#39;Predicted_Target&#39;</span><span class="p">]]</span>

<span class="n">df_pred_gnb</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>Target_before_prediction</th>
      <th>Predicted_Target</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3</td>
      <td>high risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>1</th>
      <td>11</td>
      <td>mid risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>2</th>
      <td>12</td>
      <td>low risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23</td>
      <td>low risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>4</th>
      <td>28</td>
      <td>low risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>198</th>
      <td>1003</td>
      <td>high risk</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>199</th>
      <td>1005</td>
      <td>high risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>200</th>
      <td>1010</td>
      <td>high risk</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>201</th>
      <td>1011</td>
      <td>high risk</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>202</th>
      <td>1013</td>
      <td>mid risk</td>
      <td>mid risk</td>
    </tr>
  </tbody>
</table>
<p>203 rows × 3 columns</p>
</div></div></div>
</div>
<p>Menampilkan df_diff_gnb yang nilai Target_before_prediction dan Predicted_Target berbeda dari df_pred_gnb.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Memfilter baris yang memiliki nilai yang berbeda antara kolom &#39;Target_before_prediction&#39; dan &#39;Predicted_Target&#39;</span>
<span class="n">df_diff_gnb</span> <span class="o">=</span> <span class="n">df_pred_gnb</span><span class="p">[</span><span class="n">df_pred_gnb</span><span class="p">[</span><span class="s1">&#39;Target_before_prediction&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">df_pred_gnb</span><span class="p">[</span><span class="s1">&#39;Predicted_Target&#39;</span><span class="p">]]</span>

<span class="c1"># Menampilkan DataFrame yang telah difilter</span>
<span class="n">df_diff_gnb</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>Target_before_prediction</th>
      <th>Predicted_Target</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3</td>
      <td>high risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>1</th>
      <td>11</td>
      <td>mid risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>6</th>
      <td>35</td>
      <td>low risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>10</th>
      <td>72</td>
      <td>mid risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>11</th>
      <td>85</td>
      <td>mid risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>184</th>
      <td>959</td>
      <td>high risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>189</th>
      <td>978</td>
      <td>high risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>192</th>
      <td>986</td>
      <td>high risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>193</th>
      <td>989</td>
      <td>high risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>199</th>
      <td>1005</td>
      <td>high risk</td>
      <td>mid risk</td>
    </tr>
  </tbody>
</table>
<p>75 rows × 3 columns</p>
</div></div></div>
</div>
</section>
<section id="membuat-model-k-nearest-neighbors-knn-dengan-code-python">
<h2>Membuat Model K-Nearest Neighbors (KNN) dengan Code Python<a class="headerlink" href="#membuat-model-k-nearest-neighbors-knn-dengan-code-python" title="Link to this heading">#</a></h2>
<p>Mengimport library dari pandas dan sklearn untuk melakukan modelling K-Nearest Neighbors (KNN) menggunakan code python</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="kn">import</span> <span class="n">KNeighborsClassifier</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">accuracy_score</span>
</pre></div>
</div>
</div>
</div>
<p>Menyalin df_main_lof ke dalam variabel df_main_knn untuk dilakukan perhitungan K-Nearest Neighbors (KNN) dan menampilkan df_main_knn yang telah disalin sebelumnya</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Copy dataset untuk menjaga konsistensi</span>
<span class="n">df_main_knn</span> <span class="o">=</span> <span class="n">df_main_lof</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">df_main_knn</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>Age</th>
      <th>SystolicBP</th>
      <th>DiastolicBP</th>
      <th>BS</th>
      <th>BodyTemp</th>
      <th>HeartRate</th>
      <th>RiskLevel</th>
      <th>LOF_Score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>25</td>
      <td>130</td>
      <td>80</td>
      <td>15.0</td>
      <td>98.0</td>
      <td>86</td>
      <td>high risk</td>
      <td>1.379773</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>35</td>
      <td>140</td>
      <td>90</td>
      <td>13.0</td>
      <td>98.0</td>
      <td>70</td>
      <td>high risk</td>
      <td>0.991708</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>29</td>
      <td>90</td>
      <td>70</td>
      <td>8.0</td>
      <td>100.0</td>
      <td>80</td>
      <td>high risk</td>
      <td>1.198120</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>30</td>
      <td>140</td>
      <td>85</td>
      <td>7.0</td>
      <td>98.0</td>
      <td>70</td>
      <td>high risk</td>
      <td>1.102981</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>35</td>
      <td>120</td>
      <td>60</td>
      <td>6.1</td>
      <td>98.0</td>
      <td>76</td>
      <td>low risk</td>
      <td>1.041105</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1009</th>
      <td>1009</td>
      <td>22</td>
      <td>120</td>
      <td>60</td>
      <td>15.0</td>
      <td>98.0</td>
      <td>80</td>
      <td>high risk</td>
      <td>1.223653</td>
    </tr>
    <tr>
      <th>1010</th>
      <td>1010</td>
      <td>55</td>
      <td>120</td>
      <td>90</td>
      <td>18.0</td>
      <td>98.0</td>
      <td>60</td>
      <td>high risk</td>
      <td>1.173908</td>
    </tr>
    <tr>
      <th>1011</th>
      <td>1011</td>
      <td>35</td>
      <td>85</td>
      <td>60</td>
      <td>19.0</td>
      <td>98.0</td>
      <td>86</td>
      <td>high risk</td>
      <td>1.375510</td>
    </tr>
    <tr>
      <th>1012</th>
      <td>1012</td>
      <td>43</td>
      <td>120</td>
      <td>90</td>
      <td>18.0</td>
      <td>98.0</td>
      <td>70</td>
      <td>high risk</td>
      <td>1.039058</td>
    </tr>
    <tr>
      <th>1013</th>
      <td>1013</td>
      <td>32</td>
      <td>120</td>
      <td>65</td>
      <td>6.0</td>
      <td>101.0</td>
      <td>76</td>
      <td>mid risk</td>
      <td>1.014277</td>
    </tr>
  </tbody>
</table>
<p>1012 rows × 9 columns</p>
</div></div></div>
</div>
<p>Melakukan pemisahan dataset menjadi dua bagian: set data training dan testing sebesar 20% untuk data testing dan 80% untuk data training. X_train untuk data training(features), X_test untuk data testing(features), y_train untuk data training(targets), y_test untuk data testing(targets).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X_train_model</span><span class="p">,</span> <span class="n">Y_train_model</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Membuat model K-Nearest Neighbors (KNN) dengan 40 tetangga terdekat menggunakan jarak Euclidean (p=2), setelah membuat model berdasarkan data training, lalu memprediksi data testing menggunakan model yang sebelumnya sudah dibuat menggunakan data training.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Inisialisasi model KNN dengan jumlah tetangga k = 40</span>
<span class="n">knn_model</span> <span class="o">=</span> <span class="n">KNeighborsClassifier</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="s1">&#39;distance&#39;</span><span class="p">)</span>
<span class="n">knn_model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">y_pred_knn</span> <span class="o">=</span> <span class="n">knn_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="c1"># Hitung akurasi</span>
<span class="n">accuracy_knn</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_pred_knn</span><span class="p">,</span> <span class="n">y_test</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Akurasi KNN: </span><span class="si">{</span><span class="n">accuracy_knn</span><span class="si">:</span><span class="s1">.2%</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Akurasi KNN: 83.74%
</pre></div>
</div>
</div>
</div>
<p>Berdasarkan nilai diatas tingkat akurasinya 83,74%. Ini menunjukkan model tersebut dapat memprediksi dengan benar sekitar 83,74% kasus yang diberikan.</p>
<p>Mencoba memprediksi menggunakan model K-Nearest Neighbors (KNN) yang telah dibuat sebelumnya dengan data input 30, 140, 85, 7, 98, 70 yang berasal dari data id ke-3.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hasil Prediksi Class KNN: &#39;</span><span class="p">,</span> <span class="n">knn_model</span><span class="o">.</span><span class="n">predict</span><span class="p">([[</span><span class="mi">30</span><span class="p">,</span><span class="mi">140</span><span class="p">,</span><span class="mi">85</span><span class="p">,</span><span class="mf">7.0</span><span class="p">,</span><span class="mf">98.0</span><span class="p">,</span><span class="mi">70</span><span class="p">]]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Hasil Prediksi Class KNN:  [&#39;high risk&#39;]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\ahmad\AppData\Local\Programs\Python\Python310\lib\site-packages\sklearn\base.py:493: UserWarning: X does not have valid feature names, but KNeighborsClassifier was fitted with feature names
  warnings.warn(
</pre></div>
</div>
</div>
</div>
<p>Membuat dataframe dari Dataframe dataset yang asli dan disimpan ke df_pred_knn untuk dilakukan prediksi. Menambahkan kolom baru Target_before_prediciton yang diisi dengan data testing dan Predicted_Target yang diisi dengan data hasil prediksi. Menggabungkan kolom ID dari df_test dan df_pred_knn. Mengurutkan df_pred berdasarkan kolom ID. Menampilkan ID, Target_before_prediciton, dan Predicted_target dari df_pred_knn.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Membuat DataFrame df_pred_knn dari y_test dan y_pred_knn</span>
<span class="n">df_pred_knn</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">df_pred_knn</span><span class="p">[</span><span class="s1">&#39;Target_before_prediction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">y_test</span>
<span class="n">df_pred_knn</span><span class="p">[</span><span class="s1">&#39;Predicted_Target&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">y_pred_knn</span>

<span class="c1"># Menggabungkan kolom &#39;ID&#39; dari df_test dengan DataFrame df_pred_knn</span>
<span class="n">df_pred_knn</span><span class="p">[</span><span class="s1">&#39;ID&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_test</span><span class="p">[</span><span class="s1">&#39;ID&#39;</span><span class="p">]</span>

<span class="c1"># Mengurutkan DataFrame berdasarkan kolom &#39;ID&#39;</span>
<span class="n">df_pred_knn</span> <span class="o">=</span> <span class="n">df_pred_knn</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;ID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Menampilkan DataFrame df_pred_knn yang diurutkan</span>
<span class="n">df_pred_knn</span> <span class="o">=</span> <span class="n">df_pred_knn</span><span class="p">[[</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Target_before_prediction&#39;</span><span class="p">,</span> <span class="s1">&#39;Predicted_Target&#39;</span><span class="p">]]</span>

<span class="n">df_pred_knn</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>Target_before_prediction</th>
      <th>Predicted_Target</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3</td>
      <td>high risk</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>1</th>
      <td>11</td>
      <td>mid risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>2</th>
      <td>12</td>
      <td>low risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23</td>
      <td>low risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>4</th>
      <td>28</td>
      <td>low risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>198</th>
      <td>1003</td>
      <td>high risk</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>199</th>
      <td>1005</td>
      <td>high risk</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>200</th>
      <td>1010</td>
      <td>high risk</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>201</th>
      <td>1011</td>
      <td>high risk</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>202</th>
      <td>1013</td>
      <td>mid risk</td>
      <td>mid risk</td>
    </tr>
  </tbody>
</table>
<p>203 rows × 3 columns</p>
</div></div></div>
</div>
<p>Menampilkan df_diff_knn yang nilai Target_before_prediction dan Predicted_Target berbeda dari df_pred_knn.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Memfilter baris yang memiliki nilai yang berbeda antara kolom &#39;Target_before_prediction&#39; dan &#39;Predicted_Target&#39;</span>
<span class="n">df_diff_knn</span> <span class="o">=</span> <span class="n">df_pred_knn</span><span class="p">[</span><span class="n">df_pred_knn</span><span class="p">[</span><span class="s1">&#39;Target_before_prediction&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">df_pred_knn</span><span class="p">[</span><span class="s1">&#39;Predicted_Target&#39;</span><span class="p">]]</span>

<span class="c1"># Menampilkan DataFrame yang telah difilter</span>
<span class="n">df_diff_knn</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>Target_before_prediction</th>
      <th>Predicted_Target</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>39</th>
      <td>250</td>
      <td>low risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>40</th>
      <td>258</td>
      <td>low risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>42</th>
      <td>269</td>
      <td>low risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>47</th>
      <td>293</td>
      <td>low risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>49</th>
      <td>309</td>
      <td>low risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>53</th>
      <td>329</td>
      <td>high risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>60</th>
      <td>353</td>
      <td>high risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>61</th>
      <td>354</td>
      <td>high risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>62</th>
      <td>355</td>
      <td>high risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>63</th>
      <td>356</td>
      <td>high risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>71</th>
      <td>390</td>
      <td>high risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>73</th>
      <td>399</td>
      <td>low risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>75</th>
      <td>424</td>
      <td>mid risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>99</th>
      <td>516</td>
      <td>mid risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>103</th>
      <td>546</td>
      <td>low risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>116</th>
      <td>612</td>
      <td>mid risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>120</th>
      <td>632</td>
      <td>high risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>122</th>
      <td>652</td>
      <td>low risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>130</th>
      <td>697</td>
      <td>low risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>143</th>
      <td>793</td>
      <td>mid risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>147</th>
      <td>812</td>
      <td>mid risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>149</th>
      <td>819</td>
      <td>mid risk</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>151</th>
      <td>822</td>
      <td>mid risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>152</th>
      <td>824</td>
      <td>mid risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>153</th>
      <td>826</td>
      <td>mid risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>154</th>
      <td>831</td>
      <td>mid risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>169</th>
      <td>895</td>
      <td>low risk</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>173</th>
      <td>920</td>
      <td>low risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>175</th>
      <td>926</td>
      <td>low risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>177</th>
      <td>934</td>
      <td>low risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>178</th>
      <td>935</td>
      <td>low risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>179</th>
      <td>937</td>
      <td>low risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>196</th>
      <td>1001</td>
      <td>high risk</td>
      <td>mid risk</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Mencetak akurasi model Gaussian Naive Bayes dan KNN
, lalu menentukan model mana yang lebih baik berdasarkan akurasi</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Compare with Gaussian Naive Bayes Model</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Akurasi Gaussian Naive Bayes: </span><span class="si">{</span><span class="n">accuracy_gnb</span><span class="si">:</span><span class="s1">.2%</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Akurasi K-Nearest Neighbors: </span><span class="si">{</span><span class="n">accuracy_knn</span><span class="si">:</span><span class="s1">.2%</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">accuracy_knn</span> <span class="o">&gt;</span> <span class="n">accuracy_gnb</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model K-Nearest Neighbors (KNN) memiliki akurasi lebih tinggi dan lebih baik untuk deployment.&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model Gaussian Naive Bayes memiliki akurasi lebih tinggi dan lebih baik untuk deployment.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Akurasi Gaussian Naive Bayes: 63.05%
Akurasi K-Nearest Neighbors: 83.74%
Model K-Nearest Neighbors (KNN) memiliki akurasi lebih tinggi dan lebih baik untuk deployment.
</pre></div>
</div>
</div>
</div>
</section>
<section id="membuat-model-classifier-dengan-konsep-ensemble-learning-stacking">
<h2>Membuat Model Classifier dengan Konsep Ensemble Learning Stacking<a class="headerlink" href="#membuat-model-classifier-dengan-konsep-ensemble-learning-stacking" title="Link to this heading">#</a></h2>
<p>p = 1 memakai manhattan, p=2 memakai euclidean</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c1</span> <span class="o">=</span> <span class="n">KNeighborsClassifier</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="s1">&#39;distance&#39;</span><span class="p">)</span>
<span class="n">c1</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">p1_train</span> <span class="o">=</span> <span class="n">c1</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>

<span class="n">c2</span> <span class="o">=</span> <span class="n">KNeighborsClassifier</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="s1">&#39;distance&#39;</span><span class="p">)</span>
<span class="n">c2</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">p2_train</span> <span class="o">=</span> <span class="n">c2</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p1_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">p1_train</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">y_train</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;p1&#39;</span><span class="p">)</span>
<span class="n">p2_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">p2_train</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">y_train</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;p2&#39;</span><span class="p">)</span>

<span class="c1"># Concatenate predictions and y_train</span>
<span class="n">df_meta</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">p1_series</span><span class="p">,</span> <span class="n">p2_series</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df_meta</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;p1&#39;</span><span class="p">,</span> <span class="s1">&#39;p2&#39;</span><span class="p">]</span>

<span class="n">df_meta</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>p1</th>
      <th>p2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>165</th>
      <td>low risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>40</th>
      <td>low risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>592</th>
      <td>low risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>515</th>
      <td>low risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>798</th>
      <td>mid risk</td>
      <td>mid risk</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1000</th>
      <td>high risk</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>702</th>
      <td>low risk</td>
      <td>low risk</td>
    </tr>
    <tr>
      <th>1009</th>
      <td>high risk</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>206</th>
      <td>high risk</td>
      <td>high risk</td>
    </tr>
    <tr>
      <th>868</th>
      <td>mid risk</td>
      <td>mid risk</td>
    </tr>
  </tbody>
</table>
<p>809 rows × 2 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_meta</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;df_meta.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">X_test</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>SystolicBP</th>
      <th>DiastolicBP</th>
      <th>BS</th>
      <th>BodyTemp</th>
      <th>HeartRate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>176</th>
      <td>35</td>
      <td>140</td>
      <td>100</td>
      <td>8.0</td>
      <td>98.0</td>
      <td>66</td>
    </tr>
    <tr>
      <th>510</th>
      <td>17</td>
      <td>90</td>
      <td>63</td>
      <td>7.5</td>
      <td>101.0</td>
      <td>70</td>
    </tr>
    <tr>
      <th>846</th>
      <td>36</td>
      <td>120</td>
      <td>90</td>
      <td>7.0</td>
      <td>98.0</td>
      <td>82</td>
    </tr>
    <tr>
      <th>600</th>
      <td>50</td>
      <td>130</td>
      <td>100</td>
      <td>16.0</td>
      <td>98.0</td>
      <td>75</td>
    </tr>
    <tr>
      <th>11</th>
      <td>19</td>
      <td>120</td>
      <td>80</td>
      <td>7.0</td>
      <td>98.0</td>
      <td>70</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>801</th>
      <td>23</td>
      <td>130</td>
      <td>70</td>
      <td>6.8</td>
      <td>98.0</td>
      <td>78</td>
    </tr>
    <tr>
      <th>1013</th>
      <td>32</td>
      <td>120</td>
      <td>65</td>
      <td>6.0</td>
      <td>101.0</td>
      <td>76</td>
    </tr>
    <tr>
      <th>655</th>
      <td>48</td>
      <td>120</td>
      <td>80</td>
      <td>11.0</td>
      <td>98.0</td>
      <td>88</td>
    </tr>
    <tr>
      <th>857</th>
      <td>30</td>
      <td>120</td>
      <td>80</td>
      <td>6.9</td>
      <td>101.0</td>
      <td>76</td>
    </tr>
    <tr>
      <th>288</th>
      <td>26</td>
      <td>85</td>
      <td>60</td>
      <td>6.0</td>
      <td>101.0</td>
      <td>86</td>
    </tr>
  </tbody>
</table>
<p>203 rows × 6 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.naive_bayes</span> <span class="kn">import</span> <span class="n">GaussianNB</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">accuracy_score</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">LabelEncoder</span>

<span class="c1"># Mengubah nilai string menjadi numerik menggunakan Label Encoding</span>
<span class="n">label_encoder</span> <span class="o">=</span> <span class="n">LabelEncoder</span><span class="p">()</span>


<span class="n">df_meta</span><span class="p">[</span><span class="s1">&#39;p1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">label_encoder</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df_meta</span><span class="p">[</span><span class="s1">&#39;p1&#39;</span><span class="p">])</span>
<span class="n">df_meta</span><span class="p">[</span><span class="s1">&#39;p2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">label_encoder</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df_meta</span><span class="p">[</span><span class="s1">&#39;p2&#39;</span><span class="p">])</span>


<span class="n">df_meta</span><span class="p">[[</span><span class="s1">&#39;p1&#39;</span><span class="p">,</span> <span class="s1">&#39;p2&#39;</span><span class="p">]]</span>


<span class="n">gnb_model</span> <span class="o">=</span> <span class="n">GaussianNB</span><span class="p">()</span>
<span class="n">gnb_model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df_meta</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>


<span class="c1"># Membuat prediksi pada set test</span>
<span class="c1"># meta_predictions = gnb_model.predict(X_test)</span>


<span class="c1"># accuracy_meta = accuracy_score(y_test, meta_predictions)</span>

<span class="c1"># print(accuracy_meta)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>#sk-container-id-1 {
  /* Definition of color scheme common for light and dark mode */
  --sklearn-color-text: black;
  --sklearn-color-line: gray;
  /* Definition of color scheme for unfitted estimators */
  --sklearn-color-unfitted-level-0: #fff5e6;
  --sklearn-color-unfitted-level-1: #f6e4d2;
  --sklearn-color-unfitted-level-2: #ffe0b3;
  --sklearn-color-unfitted-level-3: chocolate;
  /* Definition of color scheme for fitted estimators */
  --sklearn-color-fitted-level-0: #f0f8ff;
  --sklearn-color-fitted-level-1: #d4ebff;
  --sklearn-color-fitted-level-2: #b3dbfd;
  --sklearn-color-fitted-level-3: cornflowerblue;

  /* Specific color for light theme */
  --sklearn-color-text-on-default-background: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, black)));
  --sklearn-color-background: var(--sg-background-color, var(--theme-background, var(--jp-layout-color0, white)));
  --sklearn-color-border-box: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, black)));
  --sklearn-color-icon: #696969;

  @media (prefers-color-scheme: dark) {
    /* Redefinition of color scheme for dark theme */
    --sklearn-color-text-on-default-background: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, white)));
    --sklearn-color-background: var(--sg-background-color, var(--theme-background, var(--jp-layout-color0, #111)));
    --sklearn-color-border-box: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, white)));
    --sklearn-color-icon: #878787;
  }
}

#sk-container-id-1 {
  color: var(--sklearn-color-text);
}

#sk-container-id-1 pre {
  padding: 0;
}

#sk-container-id-1 input.sk-hidden--visually {
  border: 0;
  clip: rect(1px 1px 1px 1px);
  clip: rect(1px, 1px, 1px, 1px);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

#sk-container-id-1 div.sk-dashed-wrapped {
  border: 1px dashed var(--sklearn-color-line);
  margin: 0 0.4em 0.5em 0.4em;
  box-sizing: border-box;
  padding-bottom: 0.4em;
  background-color: var(--sklearn-color-background);
}

#sk-container-id-1 div.sk-container {
  /* jupyter's `normalize.less` sets `[hidden] { display: none; }`
     but bootstrap.min.css set `[hidden] { display: none !important; }`
     so we also need the `!important` here to be able to override the
     default hidden behavior on the sphinx rendered scikit-learn.org.
     See: https://github.com/scikit-learn/scikit-learn/issues/21755 */
  display: inline-block !important;
  position: relative;
}

#sk-container-id-1 div.sk-text-repr-fallback {
  display: none;
}

div.sk-parallel-item,
div.sk-serial,
div.sk-item {
  /* draw centered vertical line to link estimators */
  background-image: linear-gradient(var(--sklearn-color-text-on-default-background), var(--sklearn-color-text-on-default-background));
  background-size: 2px 100%;
  background-repeat: no-repeat;
  background-position: center center;
}

/* Parallel-specific style estimator block */

#sk-container-id-1 div.sk-parallel-item::after {
  content: "";
  width: 100%;
  border-bottom: 2px solid var(--sklearn-color-text-on-default-background);
  flex-grow: 1;
}

#sk-container-id-1 div.sk-parallel {
  display: flex;
  align-items: stretch;
  justify-content: center;
  background-color: var(--sklearn-color-background);
  position: relative;
}

#sk-container-id-1 div.sk-parallel-item {
  display: flex;
  flex-direction: column;
}

#sk-container-id-1 div.sk-parallel-item:first-child::after {
  align-self: flex-end;
  width: 50%;
}

#sk-container-id-1 div.sk-parallel-item:last-child::after {
  align-self: flex-start;
  width: 50%;
}

#sk-container-id-1 div.sk-parallel-item:only-child::after {
  width: 0;
}

/* Serial-specific style estimator block */

#sk-container-id-1 div.sk-serial {
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: var(--sklearn-color-background);
  padding-right: 1em;
  padding-left: 1em;
}


/* Toggleable style: style used for estimator/Pipeline/ColumnTransformer box that is
clickable and can be expanded/collapsed.
- Pipeline and ColumnTransformer use this feature and define the default style
- Estimators will overwrite some part of the style using the `sk-estimator` class
*/

/* Pipeline and ColumnTransformer style (default) */

#sk-container-id-1 div.sk-toggleable {
  /* Default theme specific background. It is overwritten whether we have a
  specific estimator or a Pipeline/ColumnTransformer */
  background-color: var(--sklearn-color-background);
}

/* Toggleable label */
#sk-container-id-1 label.sk-toggleable__label {
  cursor: pointer;
  display: block;
  width: 100%;
  margin-bottom: 0;
  padding: 0.5em;
  box-sizing: border-box;
  text-align: center;
}

#sk-container-id-1 label.sk-toggleable__label-arrow:before {
  /* Arrow on the left of the label */
  content: "▸";
  float: left;
  margin-right: 0.25em;
  color: var(--sklearn-color-icon);
}

#sk-container-id-1 label.sk-toggleable__label-arrow:hover:before {
  color: var(--sklearn-color-text);
}

/* Toggleable content - dropdown */

#sk-container-id-1 div.sk-toggleable__content {
  max-height: 0;
  max-width: 0;
  overflow: hidden;
  text-align: left;
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-1 div.sk-toggleable__content.fitted {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

#sk-container-id-1 div.sk-toggleable__content pre {
  margin: 0.2em;
  border-radius: 0.25em;
  color: var(--sklearn-color-text);
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-1 div.sk-toggleable__content.fitted pre {
  /* unfitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

#sk-container-id-1 input.sk-toggleable__control:checked~div.sk-toggleable__content {
  /* Expand drop-down */
  max-height: 200px;
  max-width: 100%;
  overflow: auto;
}

#sk-container-id-1 input.sk-toggleable__control:checked~label.sk-toggleable__label-arrow:before {
  content: "▾";
}

/* Pipeline/ColumnTransformer-specific style */

#sk-container-id-1 div.sk-label input.sk-toggleable__control:checked~label.sk-toggleable__label {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-1 div.sk-label.fitted input.sk-toggleable__control:checked~label.sk-toggleable__label {
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Estimator-specific style */

/* Colorize estimator box */
#sk-container-id-1 div.sk-estimator input.sk-toggleable__control:checked~label.sk-toggleable__label {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-1 div.sk-estimator.fitted input.sk-toggleable__control:checked~label.sk-toggleable__label {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-2);
}

#sk-container-id-1 div.sk-label label.sk-toggleable__label,
#sk-container-id-1 div.sk-label label {
  /* The background is the default theme color */
  color: var(--sklearn-color-text-on-default-background);
}

/* On hover, darken the color of the background */
#sk-container-id-1 div.sk-label:hover label.sk-toggleable__label {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-unfitted-level-2);
}

/* Label box, darken color on hover, fitted */
#sk-container-id-1 div.sk-label.fitted:hover label.sk-toggleable__label.fitted {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Estimator label */

#sk-container-id-1 div.sk-label label {
  font-family: monospace;
  font-weight: bold;
  display: inline-block;
  line-height: 1.2em;
}

#sk-container-id-1 div.sk-label-container {
  text-align: center;
}

/* Estimator-specific */
#sk-container-id-1 div.sk-estimator {
  font-family: monospace;
  border: 1px dotted var(--sklearn-color-border-box);
  border-radius: 0.25em;
  box-sizing: border-box;
  margin-bottom: 0.5em;
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-1 div.sk-estimator.fitted {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

/* on hover */
#sk-container-id-1 div.sk-estimator:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-1 div.sk-estimator.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Specification for estimator info (e.g. "i" and "?") */

/* Common style for "i" and "?" */

.sk-estimator-doc-link,
a:link.sk-estimator-doc-link,
a:visited.sk-estimator-doc-link {
  float: right;
  font-size: smaller;
  line-height: 1em;
  font-family: monospace;
  background-color: var(--sklearn-color-background);
  border-radius: 1em;
  height: 1em;
  width: 1em;
  text-decoration: none !important;
  margin-left: 1ex;
  /* unfitted */
  border: var(--sklearn-color-unfitted-level-1) 1pt solid;
  color: var(--sklearn-color-unfitted-level-1);
}

.sk-estimator-doc-link.fitted,
a:link.sk-estimator-doc-link.fitted,
a:visited.sk-estimator-doc-link.fitted {
  /* fitted */
  border: var(--sklearn-color-fitted-level-1) 1pt solid;
  color: var(--sklearn-color-fitted-level-1);
}

/* On hover */
div.sk-estimator:hover .sk-estimator-doc-link:hover,
.sk-estimator-doc-link:hover,
div.sk-label-container:hover .sk-estimator-doc-link:hover,
.sk-estimator-doc-link:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

div.sk-estimator.fitted:hover .sk-estimator-doc-link.fitted:hover,
.sk-estimator-doc-link.fitted:hover,
div.sk-label-container:hover .sk-estimator-doc-link.fitted:hover,
.sk-estimator-doc-link.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

/* Span, style for the box shown on hovering the info icon */
.sk-estimator-doc-link span {
  display: none;
  z-index: 9999;
  position: relative;
  font-weight: normal;
  right: .2ex;
  padding: .5ex;
  margin: .5ex;
  width: min-content;
  min-width: 20ex;
  max-width: 50ex;
  color: var(--sklearn-color-text);
  box-shadow: 2pt 2pt 4pt #999;
  /* unfitted */
  background: var(--sklearn-color-unfitted-level-0);
  border: .5pt solid var(--sklearn-color-unfitted-level-3);
}

.sk-estimator-doc-link.fitted span {
  /* fitted */
  background: var(--sklearn-color-fitted-level-0);
  border: var(--sklearn-color-fitted-level-3);
}

.sk-estimator-doc-link:hover span {
  display: block;
}

/* "?"-specific style due to the `<a>` HTML tag */

#sk-container-id-1 a.estimator_doc_link {
  float: right;
  font-size: 1rem;
  line-height: 1em;
  font-family: monospace;
  background-color: var(--sklearn-color-background);
  border-radius: 1rem;
  height: 1rem;
  width: 1rem;
  text-decoration: none;
  /* unfitted */
  color: var(--sklearn-color-unfitted-level-1);
  border: var(--sklearn-color-unfitted-level-1) 1pt solid;
}

#sk-container-id-1 a.estimator_doc_link.fitted {
  /* fitted */
  border: var(--sklearn-color-fitted-level-1) 1pt solid;
  color: var(--sklearn-color-fitted-level-1);
}

/* On hover */
#sk-container-id-1 a.estimator_doc_link:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

#sk-container-id-1 a.estimator_doc_link.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-3);
}
</style><div id="sk-container-id-1" class="sk-top-container"><div class="sk-text-repr-fallback"><pre>GaussianNB()</pre><b>In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. <br />On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.</b></div><div class="sk-container" hidden><div class="sk-item"><div class="sk-estimator fitted sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-1" type="checkbox" checked><label for="sk-estimator-id-1" class="sk-toggleable__label fitted sk-toggleable__label-arrow fitted">&nbsp;&nbsp;GaussianNB<a class="sk-estimator-doc-link fitted" rel="noreferrer" target="_blank" href="https://scikit-learn.org/1.4/modules/generated/sklearn.naive_bayes.GaussianNB.html">?<span>Documentation for GaussianNB</span></a><span class="sk-estimator-doc-link fitted">i<span>Fitted</span></span></label><div class="sk-toggleable__content fitted"><pre>GaussianNB()</pre></div> </div></div></div></div></div></div>
</div>
<p>High level = 0, Low level = 1, mid level = 2</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p1_test</span> <span class="o">=</span> <span class="n">c1</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="n">p2_test</span> <span class="o">=</span> <span class="n">c2</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="n">p1_series2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">p1_test</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">y_test</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;p1&#39;</span><span class="p">)</span>
<span class="n">p2_series2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">p2_test</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">y_test</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;p2&#39;</span><span class="p">)</span>

<span class="c1"># Concatenate predictions and y_train</span>
<span class="n">df_meta_test</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">p1_series2</span><span class="p">,</span> <span class="n">p2_series2</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df_meta_test</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;p1&#39;</span><span class="p">,</span> <span class="s1">&#39;p2&#39;</span><span class="p">]</span>

<span class="n">df_meta_test</span><span class="p">[</span><span class="s1">&#39;p1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">label_encoder</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df_meta_test</span><span class="p">[</span><span class="s1">&#39;p1&#39;</span><span class="p">])</span>
<span class="n">df_meta_test</span><span class="p">[</span><span class="s1">&#39;p2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">label_encoder</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df_meta_test</span><span class="p">[</span><span class="s1">&#39;p2&#39;</span><span class="p">])</span>

<span class="n">df_meta_test</span><span class="p">[[</span><span class="s1">&#39;p1&#39;</span><span class="p">,</span> <span class="s1">&#39;p2&#39;</span><span class="p">]]</span>



<span class="n">predictions</span> <span class="o">=</span> <span class="n">gnb_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">df_meta_test</span><span class="p">)</span>

<span class="n">accuracy_meta</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">predictions</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">accuracy_meta</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.8374384236453202
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;c1.sav&#39;</span>
<span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;c2.sav&#39;</span>
<span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">c2</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;meta.sav&#39;</span>
<span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">gnb_model</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="ensemble-learning-stacking-menggunakan-library-sklearn">
<h2>Ensemble Learning Stacking Menggunakan Library Sklearn<a class="headerlink" href="#ensemble-learning-stacking-menggunakan-library-sklearn" title="Link to this heading">#</a></h2>
<p>Kita akan menggunakan referensi dari <a class="reference external" href="https://rasbt.github.io/mlxtend/user_guide/classifier/StackingClassifier/">https://rasbt.github.io/mlxtend/user_guide/classifier/StackingClassifier/</a> untuk membuat model</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">mlxtend</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Collecting mlxtend
  Downloading mlxtend-0.23.1-py3-none-any.whl.metadata (7.3 kB)
Requirement already satisfied: scipy&gt;=1.2.1 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from mlxtend) (1.12.0)
Requirement already satisfied: numpy&gt;=1.16.2 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from mlxtend) (1.26.4)
Requirement already satisfied: pandas&gt;=0.24.2 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from mlxtend) (2.2.1)
Requirement already satisfied: scikit-learn&gt;=1.0.2 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from mlxtend) (1.4.1.post1)
Requirement already satisfied: matplotlib&gt;=3.0.0 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from mlxtend) (3.8.3)
Requirement already satisfied: joblib&gt;=0.13.2 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from mlxtend) (1.3.2)
Requirement already satisfied: contourpy&gt;=1.0.1 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from matplotlib&gt;=3.0.0-&gt;mlxtend) (1.2.0)
Requirement already satisfied: cycler&gt;=0.10 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from matplotlib&gt;=3.0.0-&gt;mlxtend) (0.12.1)
Requirement already satisfied: fonttools&gt;=4.22.0 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from matplotlib&gt;=3.0.0-&gt;mlxtend) (4.49.0)
Requirement already satisfied: kiwisolver&gt;=1.3.1 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from matplotlib&gt;=3.0.0-&gt;mlxtend) (1.4.5)
Requirement already satisfied: packaging&gt;=20.0 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from matplotlib&gt;=3.0.0-&gt;mlxtend) (23.2)
Requirement already satisfied: pillow&gt;=8 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from matplotlib&gt;=3.0.0-&gt;mlxtend) (10.2.0)
Requirement already satisfied: pyparsing&gt;=2.3.1 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from matplotlib&gt;=3.0.0-&gt;mlxtend) (3.1.1)
Requirement already satisfied: python-dateutil&gt;=2.7 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from matplotlib&gt;=3.0.0-&gt;mlxtend) (2.8.2)
Requirement already satisfied: pytz&gt;=2020.1 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from pandas&gt;=0.24.2-&gt;mlxtend) (2024.1)
Requirement already satisfied: tzdata&gt;=2022.7 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from pandas&gt;=0.24.2-&gt;mlxtend) (2024.1)
Requirement already satisfied: threadpoolctl&gt;=2.0.0 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from scikit-learn&gt;=1.0.2-&gt;mlxtend) (3.4.0)
Requirement already satisfied: six&gt;=1.5 in c:\users\ahmad\appdata\local\programs\python\python310\lib\site-packages (from python-dateutil&gt;=2.7-&gt;matplotlib&gt;=3.0.0-&gt;mlxtend) (1.16.0)
Downloading mlxtend-0.23.1-py3-none-any.whl (1.4 MB)
   ---------------------------------------- 0.0/1.4 MB ? eta -:--:--
   ---------------------------------------- 0.0/1.4 MB ? eta -:--:--
   ---------------------------------------- 0.0/1.4 MB ? eta -:--:--
    --------------------------------------- 0.0/1.4 MB 435.7 kB/s eta 0:00:04
    --------------------------------------- 0.0/1.4 MB 435.7 kB/s eta 0:00:04
    --------------------------------------- 0.0/1.4 MB 435.7 kB/s eta 0:00:04
    --------------------------------------- 0.0/1.4 MB 435.7 kB/s eta 0:00:04
    --------------------------------------- 0.0/1.4 MB 435.7 kB/s eta 0:00:04
    --------------------------------------- 0.0/1.4 MB 435.7 kB/s eta 0:00:04
   -- ------------------------------------- 0.1/1.4 MB 227.6 kB/s eta 0:00:06
   --- ------------------------------------ 0.1/1.4 MB 251.6 kB/s eta 0:00:06
   --- ------------------------------------ 0.1/1.4 MB 266.9 kB/s eta 0:00:05
   --- ------------------------------------ 0.1/1.4 MB 266.9 kB/s eta 0:00:05
   --- ------------------------------------ 0.1/1.4 MB 266.9 kB/s eta 0:00:05
   --- ------------------------------------ 0.1/1.4 MB 266.9 kB/s eta 0:00:05
   ---- ----------------------------------- 0.2/1.4 MB 229.4 kB/s eta 0:00:06
   ---- ----------------------------------- 0.2/1.4 MB 229.4 kB/s eta 0:00:06
   ----- ---------------------------------- 0.2/1.4 MB 270.6 kB/s eta 0:00:05
   ------ --------------------------------- 0.2/1.4 MB 288.1 kB/s eta 0:00:05
   ------- -------------------------------- 0.3/1.4 MB 308.4 kB/s eta 0:00:04
   ------- -------------------------------- 0.3/1.4 MB 321.5 kB/s eta 0:00:04
   ------- -------------------------------- 0.3/1.4 MB 321.5 kB/s eta 0:00:04
   ------- -------------------------------- 0.3/1.4 MB 321.5 kB/s eta 0:00:04
   ------- -------------------------------- 0.3/1.4 MB 276.5 kB/s eta 0:00:05
   ------- -------------------------------- 0.3/1.4 MB 276.5 kB/s eta 0:00:05
   ------- -------------------------------- 0.3/1.4 MB 276.5 kB/s eta 0:00:05
   ------------ --------------------------- 0.5/1.4 MB 385.9 kB/s eta 0:00:03
   ------------ --------------------------- 0.5/1.4 MB 385.9 kB/s eta 0:00:03
   ------------ --------------------------- 0.5/1.4 MB 385.9 kB/s eta 0:00:03
   ------------ --------------------------- 0.5/1.4 MB 385.9 kB/s eta 0:00:03
   ------------ --------------------------- 0.5/1.4 MB 385.9 kB/s eta 0:00:03
   ------------ --------------------------- 0.5/1.4 MB 338.8 kB/s eta 0:00:03
   ------------- -------------------------- 0.5/1.4 MB 349.3 kB/s eta 0:00:03
   -------------- ------------------------- 0.5/1.4 MB 363.2 kB/s eta 0:00:03
   --------------- ------------------------ 0.6/1.4 MB 368.6 kB/s eta 0:00:03
   ---------------- ----------------------- 0.6/1.4 MB 386.5 kB/s eta 0:00:03
   ----------------- ---------------------- 0.6/1.4 MB 395.8 kB/s eta 0:00:03
   ------------------ --------------------- 0.7/1.4 MB 411.8 kB/s eta 0:00:02
   ------------------- -------------------- 0.7/1.4 MB 410.3 kB/s eta 0:00:02
   -------------------- ------------------- 0.7/1.4 MB 417.0 kB/s eta 0:00:02
   --------------------- ------------------ 0.8/1.4 MB 431.0 kB/s eta 0:00:02
   --------------------- ------------------ 0.8/1.4 MB 431.0 kB/s eta 0:00:02
   --------------------- ------------------ 0.8/1.4 MB 431.0 kB/s eta 0:00:02
   ---------------------- ----------------- 0.8/1.4 MB 413.5 kB/s eta 0:00:02
   ---------------------- ----------------- 0.8/1.4 MB 413.5 kB/s eta 0:00:02
   ---------------------- ----------------- 0.8/1.4 MB 413.5 kB/s eta 0:00:02
   -------------------------- ------------- 1.0/1.4 MB 463.2 kB/s eta 0:00:02
   -------------------------- ------------- 1.0/1.4 MB 463.2 kB/s eta 0:00:02
   -------------------------- ------------- 1.0/1.4 MB 463.2 kB/s eta 0:00:02
   --------------------------- ------------ 1.0/1.4 MB 446.2 kB/s eta 0:00:02
   --------------------------- ------------ 1.0/1.4 MB 446.2 kB/s eta 0:00:02
   --------------------------- ------------ 1.0/1.4 MB 436.9 kB/s eta 0:00:01
   ---------------------------- ----------- 1.0/1.4 MB 441.2 kB/s eta 0:00:01
   ------------------------------ --------- 1.1/1.4 MB 454.0 kB/s eta 0:00:01
   ------------------------------- -------- 1.1/1.4 MB 457.8 kB/s eta 0:00:01
   ------------------------------- -------- 1.1/1.4 MB 457.8 kB/s eta 0:00:01
   ------------------------------- -------- 1.1/1.4 MB 457.8 kB/s eta 0:00:01
   ------------------------------- -------- 1.1/1.4 MB 457.8 kB/s eta 0:00:01
   ------------------------------- -------- 1.1/1.4 MB 457.8 kB/s eta 0:00:01
   ------------------------------- -------- 1.1/1.4 MB 457.8 kB/s eta 0:00:01
   ------------------------------- -------- 1.1/1.4 MB 457.8 kB/s eta 0:00:01
   ------------------------------------ --- 1.3/1.4 MB 483.0 kB/s eta 0:00:01
   ------------------------------------ --- 1.3/1.4 MB 483.0 kB/s eta 0:00:01
   ------------------------------------ --- 1.3/1.4 MB 483.0 kB/s eta 0:00:01
   ------------------------------------ --- 1.3/1.4 MB 483.0 kB/s eta 0:00:01
   ------------------------------------ --- 1.3/1.4 MB 483.0 kB/s eta 0:00:01
   ------------------------------------- -- 1.4/1.4 MB 454.3 kB/s eta 0:00:01
   -------------------------------------- - 1.4/1.4 MB 455.0 kB/s eta 0:00:01
   ---------------------------------------  1.4/1.4 MB 464.7 kB/s eta 0:00:01
   ---------------------------------------- 1.4/1.4 MB 467.6 kB/s eta 0:00:00
Installing collected packages: mlxtend
Successfully installed mlxtend-0.23.1
Note: you may need to restart the kernel to use updated packages.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">X_train_model</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>SystolicBP</th>
      <th>DiastolicBP</th>
      <th>BS</th>
      <th>BodyTemp</th>
      <th>HeartRate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>25</td>
      <td>130</td>
      <td>80</td>
      <td>15.0</td>
      <td>98.0</td>
      <td>86</td>
    </tr>
    <tr>
      <th>1</th>
      <td>35</td>
      <td>140</td>
      <td>90</td>
      <td>13.0</td>
      <td>98.0</td>
      <td>70</td>
    </tr>
    <tr>
      <th>2</th>
      <td>29</td>
      <td>90</td>
      <td>70</td>
      <td>8.0</td>
      <td>100.0</td>
      <td>80</td>
    </tr>
    <tr>
      <th>3</th>
      <td>30</td>
      <td>140</td>
      <td>85</td>
      <td>7.0</td>
      <td>98.0</td>
      <td>70</td>
    </tr>
    <tr>
      <th>4</th>
      <td>35</td>
      <td>120</td>
      <td>60</td>
      <td>6.1</td>
      <td>98.0</td>
      <td>76</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1009</th>
      <td>22</td>
      <td>120</td>
      <td>60</td>
      <td>15.0</td>
      <td>98.0</td>
      <td>80</td>
    </tr>
    <tr>
      <th>1010</th>
      <td>55</td>
      <td>120</td>
      <td>90</td>
      <td>18.0</td>
      <td>98.0</td>
      <td>60</td>
    </tr>
    <tr>
      <th>1011</th>
      <td>35</td>
      <td>85</td>
      <td>60</td>
      <td>19.0</td>
      <td>98.0</td>
      <td>86</td>
    </tr>
    <tr>
      <th>1012</th>
      <td>43</td>
      <td>120</td>
      <td>90</td>
      <td>18.0</td>
      <td>98.0</td>
      <td>70</td>
    </tr>
    <tr>
      <th>1013</th>
      <td>32</td>
      <td>120</td>
      <td>65</td>
      <td>6.0</td>
      <td>101.0</td>
      <td>76</td>
    </tr>
  </tbody>
</table>
<p>1012 rows × 6 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X_train_model</span><span class="p">,</span> <span class="n">Y_train_model</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span><span class="p">,</span> <span class="n">cross_val_score</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="kn">import</span> <span class="n">KNeighborsClassifier</span>
<span class="kn">from</span> <span class="nn">sklearn.naive_bayes</span> <span class="kn">import</span> <span class="n">GaussianNB</span> 
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span>
<span class="kn">from</span> <span class="nn">mlxtend.classifier</span> <span class="kn">import</span> <span class="n">StackingClassifier</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">accuracy_score</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>


<span class="n">clf1</span> <span class="o">=</span> <span class="n">KNeighborsClassifier</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span> <span class="s1">&#39;distance&#39;</span><span class="p">)</span>
<span class="n">clf2</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">clf3</span> <span class="o">=</span> <span class="n">GaussianNB</span><span class="p">()</span>
<span class="n">lr</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">()</span>
<span class="n">sclf</span> <span class="o">=</span> <span class="n">StackingClassifier</span><span class="p">(</span><span class="n">classifiers</span><span class="o">=</span><span class="p">[</span><span class="n">clf1</span><span class="p">,</span> <span class="n">clf2</span><span class="p">,</span> <span class="n">clf3</span><span class="p">],</span> <span class="n">meta_classifier</span><span class="o">=</span><span class="n">lr</span><span class="p">,</span> <span class="n">use_probas</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">average_probas</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;3-fold cross validation:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># Melakukan cross-validation untuk setiap classifier dan stacking classifier</span>
<span class="k">for</span> <span class="n">clf</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="n">clf1</span><span class="p">,</span> <span class="n">clf2</span><span class="p">,</span> <span class="n">clf3</span><span class="p">,</span> <span class="n">sclf</span><span class="p">],</span> 
                      <span class="p">[</span><span class="s1">&#39;KNN&#39;</span><span class="p">,</span> 
                       <span class="s1">&#39;Random Forest&#39;</span><span class="p">,</span> 
                       <span class="s1">&#39;Naive Bayes&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;StackingClassifier&#39;</span><span class="p">]):</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="s1">&#39;accuracy&#39;</span><span class="p">,</span> <span class="n">error_score</span><span class="o">=</span><span class="s1">&#39;raise&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Accuracy: </span><span class="si">%0.2f</span><span class="s2"> (+/- </span><span class="si">%0.2f</span><span class="s2">) [</span><span class="si">%s</span><span class="s2">]&quot;</span> 
              <span class="o">%</span> <span class="p">(</span><span class="n">scores</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">scores</span><span class="o">.</span><span class="n">std</span><span class="p">(),</span> <span class="n">label</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error for </span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Melatih StackingClassifier pada data training</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">sclf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
    <span class="c1"># Membuat prediksi pada data test</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">sclf</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
    <span class="c1"># Menghitung akurasi pada set test</span>
    <span class="n">accuracy</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Accuracy of StackingClassifier on test set: </span><span class="si">{</span><span class="n">accuracy</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error during fitting or predicting with StackingClassifier: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3-fold cross validation:

Accuracy: 0.71 (+/- 0.04) [KNN]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Accuracy: 0.77 (+/- 0.02) [Random Forest]
Accuracy: 0.60 (+/- 0.02) [Naive Bayes]
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">61</span><span class="p">],</span> <span class="n">line</span> <span class="mi">30</span>
<span class="g g-Whitespace">     </span><span class="mi">23</span> <span class="k">for</span> <span class="n">clf</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="n">clf1</span><span class="p">,</span> <span class="n">clf2</span><span class="p">,</span> <span class="n">clf3</span><span class="p">,</span> <span class="n">sclf</span><span class="p">],</span> 
<span class="g g-Whitespace">     </span><span class="mi">24</span>                       <span class="p">[</span><span class="s1">&#39;KNN&#39;</span><span class="p">,</span> 
<span class="g g-Whitespace">     </span><span class="mi">25</span>                        <span class="s1">&#39;Random Forest&#39;</span><span class="p">,</span> 
<span class="g g-Whitespace">     </span><span class="mi">26</span>                        <span class="s1">&#39;Naive Bayes&#39;</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">27</span>                        <span class="s1">&#39;StackingClassifier&#39;</span><span class="p">]):</span>
<span class="g g-Whitespace">     </span><span class="mi">29</span>     <span class="k">try</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">30</span>         <span class="n">scores</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="s1">&#39;accuracy&#39;</span><span class="p">,</span> <span class="n">error_score</span><span class="o">=</span><span class="s1">&#39;raise&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">31</span>         <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Accuracy: </span><span class="si">%0.2f</span><span class="s2"> (+/- </span><span class="si">%0.2f</span><span class="s2">) [</span><span class="si">%s</span><span class="s2">]&quot;</span> 
<span class="g g-Whitespace">     </span><span class="mi">32</span>               <span class="o">%</span> <span class="p">(</span><span class="n">scores</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">scores</span><span class="o">.</span><span class="n">std</span><span class="p">(),</span> <span class="n">label</span><span class="p">))</span>
<span class="g g-Whitespace">     </span><span class="mi">33</span>     <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

<span class="nn">File ~\AppData\Local\Programs\Python\Python310\lib\site-packages\sklearn\utils\_param_validation.py:213,</span> in <span class="ni">validate_params.&lt;locals&gt;.decorator.&lt;locals&gt;.wrapper</span><span class="nt">(*args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">207</span> <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">208</span>     <span class="k">with</span> <span class="n">config_context</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">209</span>         <span class="n">skip_parameter_validation</span><span class="o">=</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">210</span>             <span class="n">prefer_skip_nested_validation</span> <span class="ow">or</span> <span class="n">global_skip_validation</span>
<span class="g g-Whitespace">    </span><span class="mi">211</span>         <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">212</span>     <span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">213</span>         <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">214</span> <span class="k">except</span> <span class="n">InvalidParameterError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">215</span>     <span class="c1"># When the function is just a wrapper around an estimator, we allow</span>
<span class="g g-Whitespace">    </span><span class="mi">216</span>     <span class="c1"># the function to delegate validation to the estimator, but we replace</span>
<span class="g g-Whitespace">    </span><span class="mi">217</span>     <span class="c1"># the name of the estimator by the name of the function in the error</span>
<span class="g g-Whitespace">    </span><span class="mi">218</span>     <span class="c1"># message to avoid confusion.</span>
<span class="g g-Whitespace">    </span><span class="mi">219</span>     <span class="n">msg</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">220</span>         <span class="sa">r</span><span class="s2">&quot;parameter of \w+ must be&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">221</span>         <span class="sa">f</span><span class="s2">&quot;parameter of </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__qualname__</span><span class="si">}</span><span class="s2"> must be&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">222</span>         <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
<span class="g g-Whitespace">    </span><span class="mi">223</span>     <span class="p">)</span>

<span class="nn">File ~\AppData\Local\Programs\Python\Python310\lib\site-packages\sklearn\model_selection\_validation.py:719,</span> in <span class="ni">cross_val_score</span><span class="nt">(estimator, X, y, groups, scoring, cv, n_jobs, verbose, fit_params, params, pre_dispatch, error_score)</span>
<span class="g g-Whitespace">    </span><span class="mi">716</span> <span class="c1"># To ensure multimetric format is not supported</span>
<span class="g g-Whitespace">    </span><span class="mi">717</span> <span class="n">scorer</span> <span class="o">=</span> <span class="n">check_scoring</span><span class="p">(</span><span class="n">estimator</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="n">scoring</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">719</span> <span class="n">cv_results</span> <span class="o">=</span> <span class="n">cross_validate</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">720</span>     <span class="n">estimator</span><span class="o">=</span><span class="n">estimator</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">721</span>     <span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">722</span>     <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">723</span>     <span class="n">groups</span><span class="o">=</span><span class="n">groups</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">724</span>     <span class="n">scoring</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="n">scorer</span><span class="p">},</span>
<span class="g g-Whitespace">    </span><span class="mi">725</span>     <span class="n">cv</span><span class="o">=</span><span class="n">cv</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">726</span>     <span class="n">n_jobs</span><span class="o">=</span><span class="n">n_jobs</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">727</span>     <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">728</span>     <span class="n">fit_params</span><span class="o">=</span><span class="n">fit_params</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">729</span>     <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">730</span>     <span class="n">pre_dispatch</span><span class="o">=</span><span class="n">pre_dispatch</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">731</span>     <span class="n">error_score</span><span class="o">=</span><span class="n">error_score</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">732</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">733</span> <span class="k">return</span> <span class="n">cv_results</span><span class="p">[</span><span class="s2">&quot;test_score&quot;</span><span class="p">]</span>

<span class="nn">File ~\AppData\Local\Programs\Python\Python310\lib\site-packages\sklearn\utils\_param_validation.py:213,</span> in <span class="ni">validate_params.&lt;locals&gt;.decorator.&lt;locals&gt;.wrapper</span><span class="nt">(*args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">207</span> <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">208</span>     <span class="k">with</span> <span class="n">config_context</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">209</span>         <span class="n">skip_parameter_validation</span><span class="o">=</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">210</span>             <span class="n">prefer_skip_nested_validation</span> <span class="ow">or</span> <span class="n">global_skip_validation</span>
<span class="g g-Whitespace">    </span><span class="mi">211</span>         <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">212</span>     <span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">213</span>         <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">214</span> <span class="k">except</span> <span class="n">InvalidParameterError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">215</span>     <span class="c1"># When the function is just a wrapper around an estimator, we allow</span>
<span class="g g-Whitespace">    </span><span class="mi">216</span>     <span class="c1"># the function to delegate validation to the estimator, but we replace</span>
<span class="g g-Whitespace">    </span><span class="mi">217</span>     <span class="c1"># the name of the estimator by the name of the function in the error</span>
<span class="g g-Whitespace">    </span><span class="mi">218</span>     <span class="c1"># message to avoid confusion.</span>
<span class="g g-Whitespace">    </span><span class="mi">219</span>     <span class="n">msg</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">220</span>         <span class="sa">r</span><span class="s2">&quot;parameter of \w+ must be&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">221</span>         <span class="sa">f</span><span class="s2">&quot;parameter of </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__qualname__</span><span class="si">}</span><span class="s2"> must be&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">222</span>         <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
<span class="g g-Whitespace">    </span><span class="mi">223</span>     <span class="p">)</span>

<span class="nn">File ~\AppData\Local\Programs\Python\Python310\lib\site-packages\sklearn\model_selection\_validation.py:430,</span> in <span class="ni">cross_validate</span><span class="nt">(estimator, X, y, groups, scoring, cv, n_jobs, verbose, fit_params, params, pre_dispatch, return_train_score, return_estimator, return_indices, error_score)</span>
<span class="g g-Whitespace">    </span><span class="mi">427</span> <span class="c1"># We clone the estimator to make sure that all the folds are</span>
<span class="g g-Whitespace">    </span><span class="mi">428</span> <span class="c1"># independent, and that it is pickle-able.</span>
<span class="g g-Whitespace">    </span><span class="mi">429</span> <span class="n">parallel</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="n">n_jobs</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span> <span class="n">pre_dispatch</span><span class="o">=</span><span class="n">pre_dispatch</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">430</span> <span class="n">results</span> <span class="o">=</span> <span class="n">parallel</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">431</span>     <span class="n">delayed</span><span class="p">(</span><span class="n">_fit_and_score</span><span class="p">)(</span>
<span class="g g-Whitespace">    </span><span class="mi">432</span>         <span class="n">clone</span><span class="p">(</span><span class="n">estimator</span><span class="p">),</span>
<span class="g g-Whitespace">    </span><span class="mi">433</span>         <span class="n">X</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">434</span>         <span class="n">y</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">435</span>         <span class="n">scorer</span><span class="o">=</span><span class="n">scorers</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">436</span>         <span class="n">train</span><span class="o">=</span><span class="n">train</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">437</span>         <span class="n">test</span><span class="o">=</span><span class="n">test</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">438</span>         <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">439</span>         <span class="n">parameters</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">440</span>         <span class="n">fit_params</span><span class="o">=</span><span class="n">routed_params</span><span class="o">.</span><span class="n">estimator</span><span class="o">.</span><span class="n">fit</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">441</span>         <span class="n">score_params</span><span class="o">=</span><span class="n">routed_params</span><span class="o">.</span><span class="n">scorer</span><span class="o">.</span><span class="n">score</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">442</span>         <span class="n">return_train_score</span><span class="o">=</span><span class="n">return_train_score</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">443</span>         <span class="n">return_times</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">444</span>         <span class="n">return_estimator</span><span class="o">=</span><span class="n">return_estimator</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">445</span>         <span class="n">error_score</span><span class="o">=</span><span class="n">error_score</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">446</span>     <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">447</span>     <span class="k">for</span> <span class="n">train</span><span class="p">,</span> <span class="n">test</span> <span class="ow">in</span> <span class="n">indices</span>
<span class="g g-Whitespace">    </span><span class="mi">448</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">450</span> <span class="n">_warn_or_raise_about_fit_failures</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">error_score</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">452</span> <span class="c1"># For callable scoring, the return type is only know after calling. If the</span>
<span class="g g-Whitespace">    </span><span class="mi">453</span> <span class="c1"># return type is a dictionary, the error scores can now be inserted with</span>
<span class="g g-Whitespace">    </span><span class="mi">454</span> <span class="c1"># the correct key.</span>

<span class="nn">File ~\AppData\Local\Programs\Python\Python310\lib\site-packages\sklearn\utils\parallel.py:67,</span> in <span class="ni">Parallel.__call__</span><span class="nt">(self, iterable)</span>
<span class="g g-Whitespace">     </span><span class="mi">62</span> <span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
<span class="g g-Whitespace">     </span><span class="mi">63</span> <span class="n">iterable_with_config</span> <span class="o">=</span> <span class="p">(</span>
<span class="g g-Whitespace">     </span><span class="mi">64</span>     <span class="p">(</span><span class="n">_with_config</span><span class="p">(</span><span class="n">delayed_func</span><span class="p">,</span> <span class="n">config</span><span class="p">),</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">65</span>     <span class="k">for</span> <span class="n">delayed_func</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="ow">in</span> <span class="n">iterable</span>
<span class="g g-Whitespace">     </span><span class="mi">66</span> <span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">67</span> <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="n">iterable_with_config</span><span class="p">)</span>

<span class="nn">File ~\AppData\Local\Programs\Python\Python310\lib\site-packages\joblib\parallel.py:1863,</span> in <span class="ni">Parallel.__call__</span><span class="nt">(self, iterable)</span>
<span class="g g-Whitespace">   </span><span class="mi">1861</span>     <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sequential_output</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1862</span>     <span class="nb">next</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1863</span>     <span class="k">return</span> <span class="n">output</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">return_generator</span> <span class="k">else</span> <span class="nb">list</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1865</span> <span class="c1"># Let&#39;s create an ID that uniquely identifies the current call. If the</span>
<span class="g g-Whitespace">   </span><span class="mi">1866</span> <span class="c1"># call is interrupted early and that the same instance is immediately</span>
<span class="g g-Whitespace">   </span><span class="mi">1867</span> <span class="c1"># re-used, this id will be used to prevent workers that were</span>
<span class="g g-Whitespace">   </span><span class="mi">1868</span> <span class="c1"># concurrently finalizing a task from the previous call to run the</span>
<span class="g g-Whitespace">   </span><span class="mi">1869</span> <span class="c1"># callback.</span>
<span class="g g-Whitespace">   </span><span class="mi">1870</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>

<span class="nn">File ~\AppData\Local\Programs\Python\Python310\lib\site-packages\joblib\parallel.py:1792,</span> in <span class="ni">Parallel._get_sequential_output</span><span class="nt">(self, iterable)</span>
<span class="g g-Whitespace">   </span><span class="mi">1790</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_dispatched_batches</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="g g-Whitespace">   </span><span class="mi">1791</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_dispatched_tasks</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="ne">-&gt; </span><span class="mi">1792</span> <span class="n">res</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1793</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_completed_tasks</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="g g-Whitespace">   </span><span class="mi">1794</span> <span class="bp">self</span><span class="o">.</span><span class="n">print_progress</span><span class="p">()</span>

<span class="nn">File ~\AppData\Local\Programs\Python\Python310\lib\site-packages\sklearn\utils\parallel.py:129,</span> in <span class="ni">_FuncWrapper.__call__</span><span class="nt">(self, *args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">127</span>     <span class="n">config</span> <span class="o">=</span> <span class="p">{}</span>
<span class="g g-Whitespace">    </span><span class="mi">128</span> <span class="k">with</span> <span class="n">config_context</span><span class="p">(</span><span class="o">**</span><span class="n">config</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">129</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="nn">File ~\AppData\Local\Programs\Python\Python310\lib\site-packages\sklearn\model_selection\_validation.py:917,</span> in <span class="ni">_fit_and_score</span><span class="nt">(estimator, X, y, scorer, train, test, verbose, parameters, fit_params, score_params, return_train_score, return_parameters, return_n_test_samples, return_times, return_estimator, split_progress, candidate_progress, error_score)</span>
<span class="g g-Whitespace">    </span><span class="mi">914</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;fit_error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="g g-Whitespace">    </span><span class="mi">916</span> <span class="n">fit_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
<span class="ne">--&gt; </span><span class="mi">917</span> <span class="n">test_scores</span> <span class="o">=</span> <span class="n">_score</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">918</span>     <span class="n">estimator</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">,</span> <span class="n">scorer</span><span class="p">,</span> <span class="n">score_params_test</span><span class="p">,</span> <span class="n">error_score</span>
<span class="g g-Whitespace">    </span><span class="mi">919</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">920</span> <span class="n">score_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span> <span class="o">-</span> <span class="n">fit_time</span>
<span class="g g-Whitespace">    </span><span class="mi">921</span> <span class="k">if</span> <span class="n">return_train_score</span><span class="p">:</span>

<span class="nn">File ~\AppData\Local\Programs\Python\Python310\lib\site-packages\sklearn\model_selection\_validation.py:982,</span> in <span class="ni">_score</span><span class="nt">(estimator, X_test, y_test, scorer, score_params, error_score)</span>
<span class="g g-Whitespace">    </span><span class="mi">980</span>         <span class="n">scores</span> <span class="o">=</span> <span class="n">scorer</span><span class="p">(</span><span class="n">estimator</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="o">**</span><span class="n">score_params</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">981</span>     <span class="k">else</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">982</span>         <span class="n">scores</span> <span class="o">=</span> <span class="n">scorer</span><span class="p">(</span><span class="n">estimator</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">,</span> <span class="o">**</span><span class="n">score_params</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">983</span> <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">984</span>     <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scorer</span><span class="p">,</span> <span class="n">_MultimetricScorer</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">985</span>         <span class="c1"># If `_MultimetricScorer` raises exception, the `error_score`</span>
<span class="g g-Whitespace">    </span><span class="mi">986</span>         <span class="c1"># parameter is equal to &quot;raise&quot;.</span>

<span class="nn">File ~\AppData\Local\Programs\Python\Python310\lib\site-packages\sklearn\metrics\_scorer.py:145,</span> in <span class="ni">_MultimetricScorer.__call__</span><span class="nt">(self, estimator, *args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">143</span> <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">144</span>     <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_raise_exc</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">145</span>         <span class="k">raise</span> <span class="n">e</span>
<span class="g g-Whitespace">    </span><span class="mi">146</span>     <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">147</span>         <span class="n">scores</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_exc</span><span class="p">()</span>

<span class="nn">File ~\AppData\Local\Programs\Python\Python310\lib\site-packages\sklearn\metrics\_scorer.py:137,</span> in <span class="ni">_MultimetricScorer.__call__</span><span class="nt">(self, estimator, *args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">135</span> <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">136</span>     <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scorer</span><span class="p">,</span> <span class="n">_BaseScorer</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">137</span>         <span class="n">score</span> <span class="o">=</span> <span class="n">scorer</span><span class="o">.</span><span class="n">_score</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">138</span>             <span class="n">cached_call</span><span class="p">,</span> <span class="n">estimator</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">routed_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">score</span>
<span class="g g-Whitespace">    </span><span class="mi">139</span>         <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">140</span>     <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">141</span>         <span class="n">score</span> <span class="o">=</span> <span class="n">scorer</span><span class="p">(</span><span class="n">estimator</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">routed_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">score</span><span class="p">)</span>

<span class="nn">File ~\AppData\Local\Programs\Python\Python310\lib\site-packages\sklearn\metrics\_scorer.py:345,</span> in <span class="ni">_Scorer._score</span><span class="nt">(self, method_caller, estimator, X, y_true, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">343</span> <span class="n">pos_label</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">is_regressor</span><span class="p">(</span><span class="n">estimator</span><span class="p">)</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_pos_label</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">344</span> <span class="n">response_method</span> <span class="o">=</span> <span class="n">_check_response_method</span><span class="p">(</span><span class="n">estimator</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response_method</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">345</span> <span class="n">y_pred</span> <span class="o">=</span> <span class="n">method_caller</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">346</span>     <span class="n">estimator</span><span class="p">,</span> <span class="n">response_method</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">pos_label</span><span class="o">=</span><span class="n">pos_label</span>
<span class="g g-Whitespace">    </span><span class="mi">347</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">349</span> <span class="n">scoring_kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">}</span>
<span class="g g-Whitespace">    </span><span class="mi">350</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sign</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_score_func</span><span class="p">(</span><span class="n">y_true</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="o">**</span><span class="n">scoring_kwargs</span><span class="p">)</span>

<span class="nn">File ~\AppData\Local\Programs\Python\Python310\lib\site-packages\sklearn\metrics\_scorer.py:87,</span> in <span class="ni">_cached_call</span><span class="nt">(cache, estimator, response_method, *args, **kwargs)</span>
<span class="g g-Whitespace">     </span><span class="mi">84</span> <span class="k">if</span> <span class="n">cache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">response_method</span> <span class="ow">in</span> <span class="n">cache</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">85</span>     <span class="k">return</span> <span class="n">cache</span><span class="p">[</span><span class="n">response_method</span><span class="p">]</span>
<span class="ne">---&gt; </span><span class="mi">87</span> <span class="n">result</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">_get_response_values</span><span class="p">(</span>
<span class="g g-Whitespace">     </span><span class="mi">88</span>     <span class="n">estimator</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">response_method</span><span class="o">=</span><span class="n">response_method</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="g g-Whitespace">     </span><span class="mi">89</span> <span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">91</span> <span class="k">if</span> <span class="n">cache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">92</span>     <span class="n">cache</span><span class="p">[</span><span class="n">response_method</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>

<span class="nn">File ~\AppData\Local\Programs\Python\Python310\lib\site-packages\sklearn\utils\_response.py:198,</span> in <span class="ni">_get_response_values</span><span class="nt">(estimator, X, response_method, pos_label, return_response_method_used)</span>
<span class="g g-Whitespace">    </span><span class="mi">196</span> <span class="k">if</span> <span class="n">is_classifier</span><span class="p">(</span><span class="n">estimator</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">197</span>     <span class="n">prediction_method</span> <span class="o">=</span> <span class="n">_check_response_method</span><span class="p">(</span><span class="n">estimator</span><span class="p">,</span> <span class="n">response_method</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">198</span>     <span class="n">classes</span> <span class="o">=</span> <span class="n">estimator</span><span class="o">.</span><span class="n">classes_</span>
<span class="g g-Whitespace">    </span><span class="mi">199</span>     <span class="n">target_type</span> <span class="o">=</span> <span class="n">type_of_target</span><span class="p">(</span><span class="n">classes</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">201</span>     <span class="k">if</span> <span class="n">target_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;binary&quot;</span><span class="p">,</span> <span class="s2">&quot;multiclass&quot;</span><span class="p">):</span>

<span class="ne">AttributeError</span>: &#39;StackingClassifier&#39; object has no attribute &#39;classes_&#39;
</pre></div>
</div>
</div>
</div>
<p>Test Model :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hasil Prediksi Class: &#39;</span><span class="p">,</span> <span class="n">sclf</span><span class="o">.</span><span class="n">predict</span><span class="p">([[</span><span class="mi">23</span><span class="p">,</span><span class="mi">130</span><span class="p">,</span><span class="mi">70</span><span class="p">,</span><span class="mf">7.01</span><span class="p">,</span><span class="mi">98</span><span class="p">,</span><span class="mi">78</span><span class="p">]]))</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Hasil Prediksi Class:  [&#39;mid risk&#39;]
</pre></div>
</div>
</div>
</div>
<p>Dump Model</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>
<span class="c1"># Menyimpan model ke file .sav menggunakan pickle</span>
<span class="n">model_filename</span> <span class="o">=</span> <span class="s1">&#39;stacking_classifier_model.sav&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">model_filename</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">model_file</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">sclf</span><span class="p">,</span> <span class="n">model_file</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Model saved to </span><span class="si">{</span><span class="n">model_filename</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Model saved to stacking_classifier_model.sav
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stacking_load</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;stacking_classifier_model.sav&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stacking_pred</span> <span class="o">=</span> <span class="n">stacking_load</span><span class="o">.</span><span class="n">predict</span><span class="p">([[</span><span class="mi">10</span><span class="p">,</span><span class="mi">70</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mf">6.9</span><span class="p">,</span><span class="mi">98</span><span class="p">,</span><span class="mi">70</span><span class="p">]])</span>

<span class="n">stacking_pred</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([&#39;low risk&#39;], dtype=object)
</pre></div>
</div>
</div>
</div>
</section>
<section id="membuat-model-ensemble-bagging-classifier">
<h2>Membuat Model Ensemble Bagging Classifier<a class="headerlink" href="#membuat-model-ensemble-bagging-classifier" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">Y_train</span><span class="p">,</span> <span class="n">Y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X_train_model</span><span class="p">,</span> <span class="n">Y_train_model</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">sklearn.svm</span> <span class="kn">import</span> <span class="n">SVC</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">BaggingClassifier</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">accuracy_score</span>
<span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">make_classification</span>

<span class="c1"># Inisialisasi dictionary untuk menyimpan akurasi</span>
<span class="n">accuracy_results</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c1"># Loop untuk n_estimators dari 3 sampai 20</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">51</span><span class="p">):</span>
    <span class="c1"># Membuat dan melatih BaggingClassifier dengan n_estimators yang berbeda</span>
    <span class="n">clf</span> <span class="o">=</span> <span class="n">BaggingClassifier</span><span class="p">(</span><span class="n">base_estimator</span><span class="o">=</span><span class="n">SVC</span><span class="p">(),</span> <span class="n">n_estimators</span><span class="o">=</span><span class="n">n</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">Y_train</span><span class="p">)</span>
    
    <span class="c1"># Membuat prediksi</span>
    <span class="n">clf_pred</span> <span class="o">=</span> <span class="n">clf</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
    
    <span class="c1"># Menghitung akurasi</span>
    <span class="n">accuracy</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">Y_test</span><span class="p">,</span> <span class="n">clf_pred</span><span class="p">)</span>
    
    <span class="c1"># Menyimpan hasil akurasi</span>
    <span class="n">accuracy_results</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">accuracy</span>

<span class="c1"># Menampilkan hasil akurasi untuk setiap n_estimators</span>
<span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">acc</span> <span class="ow">in</span> <span class="n">accuracy_results</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;n_estimators: </span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s1">, Accuracy: </span><span class="si">{</span><span class="n">acc</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>n_estimators: 3, Accuracy: 0.5763546798029556
n_estimators: 4, Accuracy: 0.5665024630541872
n_estimators: 5, Accuracy: 0.5911330049261084
n_estimators: 6, Accuracy: 0.5862068965517241
n_estimators: 7, Accuracy: 0.5911330049261084
n_estimators: 8, Accuracy: 0.5911330049261084
n_estimators: 9, Accuracy: 0.6059113300492611
n_estimators: 10, Accuracy: 0.5911330049261084
n_estimators: 11, Accuracy: 0.5862068965517241
n_estimators: 12, Accuracy: 0.5763546798029556
n_estimators: 13, Accuracy: 0.5763546798029556
n_estimators: 14, Accuracy: 0.5763546798029556
n_estimators: 15, Accuracy: 0.5763546798029556
n_estimators: 16, Accuracy: 0.5763546798029556
n_estimators: 17, Accuracy: 0.5812807881773399
n_estimators: 18, Accuracy: 0.5763546798029556
n_estimators: 19, Accuracy: 0.5862068965517241
n_estimators: 20, Accuracy: 0.5812807881773399
n_estimators: 21, Accuracy: 0.5812807881773399
n_estimators: 22, Accuracy: 0.5812807881773399
n_estimators: 23, Accuracy: 0.5862068965517241
n_estimators: 24, Accuracy: 0.5862068965517241
n_estimators: 25, Accuracy: 0.5862068965517241
n_estimators: 26, Accuracy: 0.5862068965517241
n_estimators: 27, Accuracy: 0.5812807881773399
n_estimators: 28, Accuracy: 0.5812807881773399
n_estimators: 29, Accuracy: 0.5812807881773399
n_estimators: 30, Accuracy: 0.5763546798029556
n_estimators: 31, Accuracy: 0.5812807881773399
n_estimators: 32, Accuracy: 0.5812807881773399
n_estimators: 33, Accuracy: 0.5862068965517241
n_estimators: 34, Accuracy: 0.5812807881773399
n_estimators: 35, Accuracy: 0.5862068965517241
n_estimators: 36, Accuracy: 0.5862068965517241
n_estimators: 37, Accuracy: 0.5862068965517241
n_estimators: 38, Accuracy: 0.5862068965517241
n_estimators: 39, Accuracy: 0.5862068965517241
n_estimators: 40, Accuracy: 0.5862068965517241
n_estimators: 41, Accuracy: 0.5862068965517241
n_estimators: 42, Accuracy: 0.5862068965517241
n_estimators: 43, Accuracy: 0.5862068965517241
n_estimators: 44, Accuracy: 0.5862068965517241
n_estimators: 45, Accuracy: 0.5862068965517241
n_estimators: 46, Accuracy: 0.5862068965517241
n_estimators: 47, Accuracy: 0.5862068965517241
n_estimators: 48, Accuracy: 0.5812807881773399
n_estimators: 49, Accuracy: 0.5862068965517241
n_estimators: 50, Accuracy: 0.5812807881773399
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="kesimpulan">
<h1>KESIMPULAN<a class="headerlink" href="#kesimpulan" title="Link to this heading">#</a></h1>
<p>Setelah melakukan analisis terhadap dataset tersebut, dapat disimpulkan bahwa ibu yang memiliki kadar glukosa darah tinggi cenderung memiliki risiko kesehatan yang tinggi. BS juga memiliki korelasi kuat dengan Age, Tekanan Darah Sistolik, dan Tekanan Darah Diastolik.
Usia juga menjadi variabel penting, dimana risiko kesehatan mulai meningkat setelah usia 25 tahun.
SystolicBP dan DistolicBP memiliki hubungan yang kuat.
BodyTemp tidak memberikan banyak informasi tetapi sebagian besar ibu di sini memiliki suhu 98F, ibu di atas suhu tersebut cenderung memiliki risiko lebih tinggi.</p>
<ul class="simple">
<li><p>Model dapat memprediksi dengan benar sekitar 63,05% kasus yang diberikan dengan Naive Bayes</p></li>
</ul>
<ul class="simple">
<li><p>Model dapat memprediksi dengan benar sekitar 83,74% kasus yang diberikan dengan KNN</p></li>
</ul>
<ul class="simple">
<li><p>Model dapat memprediksi dengan benar sekitar 86,01% kasus yang diberikan dengan Ensemble Learning Stacking dengan library</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="keputusan">
<h1>Keputusan<a class="headerlink" href="#keputusan" title="Link to this heading">#</a></h1>
<p>Berdasarkan Analisis Kami akan menggunakan Model dari Ensemble Learning Stacking dengan menggunakan Library sebagai Model Classifier untuk Deployement aplikasi</p>
<a style='text-decoration:none;line-height:16px;display:flex;color:#5B5B62;padding:10px;justify-content:end;' href='https://deepnote.com?utm_source=created-in-deepnote-cell&projectId=8580c980-9951-40c3-a954-04eac19e4351' target="_blank">
<img alt='Created in deepnote.com' style='display:inline;max-height:16px;margin:0px;margin-right:7.5px;' src='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iODBweCIgaGVpZ2h0PSI4MHB4IiB2aWV3Qm94PSIwIDAgODAgODAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU0LjEgKDc2NDkwKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5Hcm91cCAzPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9IkxhbmRpbmciIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEyMzUuMDAwMDAwLCAtNzkuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cC0zIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjM1LjAwMDAwMCwgNzkuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iUGF0aC0yMCIgZmlsbD0iIzAyNjVCNCIgcG9pbnRzPSIyLjM3NjIzNzYyIDgwIDM4LjA0NzY2NjcgODAgNTcuODIxNzgyMiA3My44MDU3NTkyIDU3LjgyMTc4MjIgMzIuNzU5MjczOSAzOS4xNDAyMjc4IDMxLjY4MzE2ODMiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0zNS4wMDc3MTgsODAgQzQyLjkwNjIwMDcsNzYuNDU0OTM1OCA0Ny41NjQ5MTY3LDcxLjU0MjI2NzEgNDguOTgzODY2LDY1LjI2MTk5MzkgQzUxLjExMjI4OTksNTUuODQxNTg0MiA0MS42NzcxNzk1LDQ5LjIxMjIyODQgMjUuNjIzOTg0Niw0OS4yMTIyMjg0IEMyNS40ODQ5Mjg5LDQ5LjEyNjg0NDggMjkuODI2MTI5Niw0My4yODM4MjQ4IDM4LjY0NzU4NjksMzEuNjgzMTY4MyBMNzIuODcxMjg3MSwzMi41NTQ0MjUgTDY1LjI4MDk3Myw2Ny42NzYzNDIxIEw1MS4xMTIyODk5LDc3LjM3NjE0NCBMMzUuMDA3NzE4LDgwIFoiIGlkPSJQYXRoLTIyIiBmaWxsPSIjMDAyODY4Ij48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMCwzNy43MzA0NDA1IEwyNy4xMTQ1MzcsMC4yNTcxMTE0MzYgQzYyLjM3MTUxMjMsLTEuOTkwNzE3MDEgODAsMTAuNTAwMzkyNyA4MCwzNy43MzA0NDA1IEM4MCw2NC45NjA0ODgyIDY0Ljc3NjUwMzgsNzkuMDUwMzQxNCAzNC4zMjk1MTEzLDgwIEM0Ny4wNTUzNDg5LDc3LjU2NzA4MDggNTMuNDE4MjY3Nyw3MC4zMTM2MTAzIDUzLjQxODI2NzcsNTguMjM5NTg4NSBDNTMuNDE4MjY3Nyw0MC4xMjg1NTU3IDM2LjMwMzk1NDQsMzcuNzMwNDQwNSAyNS4yMjc0MTcsMzcuNzMwNDQwNSBDMTcuODQzMDU4NiwzNy43MzA0NDA1IDkuNDMzOTE5NjYsMzcuNzMwNDQwNSAwLDM3LjczMDQ0MDUgWiIgaWQ9IlBhdGgtMTkiIGZpbGw9IiMzNzkzRUYiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+' > </img>
Created in <span style='font-weight:600;margin-left:4px;'>Deepnote</span></a></section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Datamining Tentang Resiko Kesehatan Ibu Hamil</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">DEPLOYMENT</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#maternal-health-risk">MATERNAL HEALTH RISK</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#tujuan-analisis-mengetahui-resiko-kesehatan-ibu-hamil">TUJUAN ANALISIS : MENGETAHUI RESIKO KESEHATAN IBU HAMIL</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#memahami-data">MEMAHAMI DATA</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#collecting-data-from-web-to-dataframe">Collecting data from web to dataframe</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#importing-data-from-api-to-dataframe">Importing data from API to dataframe</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#identifikasi-data">Identifikasi data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tabel-distribusi">Tabel Distribusi</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#prediksi-dan-target">Prediksi dan Target</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kualitas-data">Kualitas Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#missing-values">Missing Values</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deteksi-outlier">Deteksi Outlier</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#k-tetangga-terdekat-k-nearest-neighbors-k-nn">1. K-Tetangga Terdekat (K-Nearest Neighbors, K-NN)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#jarak-jangkauan-reachability-distance">2. Jarak Jangkauan (Reachability Distance)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#kepadatan-jangkauan-lokal-local-reachability-density">3. Kepadatan Jangkauan Lokal (Local Reachability Density)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#faktor-outlier-lokal-local-outlier-factor">4. Faktor Outlier Lokal (Local Outlier Factor)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#data-preprocessing">DATA PREPROCESSING</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mengatasi-outlier">Mengatasi Outlier</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#data-modelling">DATA MODELLING</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#apa-itu-klasifikasi-data">Apa itu Klasifikasi data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#membuat-model-gaussian-naive-bayes-dengan-code-python">Membuat Model Gaussian Naive Bayes dengan Code Python</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#membuat-model-k-nearest-neighbors-knn-dengan-code-python">Membuat Model K-Nearest Neighbors (KNN) dengan Code Python</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#membuat-model-classifier-dengan-konsep-ensemble-learning-stacking">Membuat Model Classifier dengan Konsep Ensemble Learning Stacking</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ensemble-learning-stacking-menggunakan-library-sklearn">Ensemble Learning Stacking Menggunakan Library Sklearn</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#membuat-model-ensemble-bagging-classifier">Membuat Model Ensemble Bagging Classifier</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#kesimpulan">KESIMPULAN</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#keputusan">Keputusan</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By (22-083) (22-116) (22-136) (22-154) (22-196)
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>